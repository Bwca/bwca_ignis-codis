<!DOCTYPE html><html lang="en-CA" dir="ltr" data-critters-container><head>
    <meta charset="utf-8">
    <title>Ignis Codis :  Typed Dates Conversion with Typescript</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="logo.png">
  <style>:root{--theme-dark: #1e2019;--theme-dark-secondary: #393e41;--theme-light: #d3d0cb;--theme-accent: #e2c044;--theme-tertiary: #587b7f}button{transition:all .3s;color:var(--theme-accent)}button:hover,button:focus{background-color:var(--theme-accent);color:var(--theme-dark)}button{background-color:var(--theme-dark);border:1px solid var(--theme-accent);padding:.2rem 1rem;font-variant:small-caps;font-size:.9rem}body{font-size:1rem}h1{font-size:2.5rem}h3{font-size:1.75rem}button{cursor:pointer}html{font-family:sans-serif,monospace}@media only screen and (max-width: 600px){html{font-size:16px}}@media only screen and (min-width: 600px){html{font-size:18px}}body{background-color:var(--theme-dark);color:var(--theme-light);padding:0;margin:0}*{transform:translateZ(0)}a{color:var(--theme-accent)}a:hover,a:focus{text-decoration:none;background-color:var(--theme-accent);color:var(--theme-dark)}markdown .language-ic-metadata{display:none}code[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}
</style><link rel="stylesheet" href="styles-4SQKIKAV.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-4SQKIKAV.css"></noscript><style ng-app-id="ng">[_nghost-ng-c3775897885]{display:grid;height:100vh;overflow:hidden;box-sizing:border-box;width:auto;position:relative}@media only screen and (max-width: 600px){[_nghost-ng-c3775897885]{background:linear-gradient(to bottom,var(--theme-dark-secondary),var(--theme-dark) 80px 100%);padding:5px 0 0;grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"logo social" "content content" "nav nav"}[_nghost-ng-c3775897885]   [data-ic-logo][_ngcontent-ng-c3775897885]{margin-left:30px}[_nghost-ng-c3775897885]   [data-ic-social-buttons][_ngcontent-ng-c3775897885]{justify-self:flex-end;margin-right:30px}[_nghost-ng-c3775897885]   main[_ngcontent-ng-c3775897885]{border-width:1px 0 0 0;border-style:solid;padding:10px;border-color:var(--theme-tertiary)}}@media only screen and (min-width: 600px){[_nghost-ng-c3775897885]{background:linear-gradient(to right,var(--theme-dark-secondary),var(--theme-dark) 125px 100%);padding:30px 0 30px 5px;grid-template-columns:100px 1fr;grid-template-rows:auto auto 1fr;grid-gap:20px;grid-template-areas:"logo content" "nav  content" "social content"}[_nghost-ng-c3775897885]   [data-ic-social-buttons][_ngcontent-ng-c3775897885]{justify-self:flex-start;align-self:flex-start}[_nghost-ng-c3775897885]   main[_ngcontent-ng-c3775897885]{border-width:0 0 0 1px;border-style:solid;border-color:var(--theme-tertiary)}}[data-ic-logo][_ngcontent-ng-c3775897885]{grid-area:logo}[data-ic-social-buttons][_ngcontent-ng-c3775897885]{grid-area:social;align-self:center}[data-ic-navigation][_ngcontent-ng-c3775897885]{grid-area:nav}main[_ngcontent-ng-c3775897885]{grid-area:content}main[_ngcontent-ng-c3775897885]   section[_ngcontent-ng-c3775897885]{max-width:800px}main[_ngcontent-ng-c3775897885]{overflow:auto;box-sizing:border-box;padding:30px;scrollbar-width:thin;scrollbar-color:var(--theme-light) var(--theme-tertiary)}</style><style ng-app-id="ng">[_nghost-ng-c1712305223]{display:flex}a[_ngcontent-ng-c1712305223]{display:block}a[_ngcontent-ng-c1712305223]:hover, a[_ngcontent-ng-c1712305223]:focus{background-color:transparent}img[_ngcontent-ng-c1712305223]{display:block;width:100%}@media only screen and (max-width: 600px){img[_ngcontent-ng-c1712305223]{max-width:55px}}@media only screen and (min-width: 600px){img[_ngcontent-ng-c1712305223]{max-width:150px}}</style><style ng-app-id="ng">a[_ngcontent-ng-c3947245871]{transition:all .3s;color:var(--theme-accent)}a[_ngcontent-ng-c3947245871]   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-accent);padding:0}a[_ngcontent-ng-c3947245871]:hover, a[_ngcontent-ng-c3947245871]:focus{background-color:var(--theme-accent);color:var(--theme-dark)}a[_ngcontent-ng-c3947245871]:hover   [data-ic-icon][_ngcontent-ng-c3947245871], a[_ngcontent-ng-c3947245871]:focus   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-dark)}a.active[_ngcontent-ng-c3947245871]{background-color:var(--theme-dark-secondary);cursor:unset;color:var(--theme-light)}a.active[_ngcontent-ng-c3947245871]   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-light)}[_nghost-ng-c3947245871]{display:flex;align-items:center;justify-content:flex-end;width:100%}@media only screen and (min-width: 600px){[_nghost-ng-c3947245871]{justify-content:space-evenly}}a[_ngcontent-ng-c3947245871]{transition:all .3s;display:flex;border-radius:5px}a[_ngcontent-ng-c3947245871]{margin:10px}[data-ic-icon][_ngcontent-ng-c3947245871]{--font-size: 1.5rem}</style><style ng-app-id="ng">a[_ngcontent-ng-c632272801]{transition:all .3s;color:var(--theme-accent)}a[_ngcontent-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-accent);padding:0}a[_ngcontent-ng-c632272801]:hover, a[_ngcontent-ng-c632272801]:focus{background-color:var(--theme-accent);color:var(--theme-dark)}a[_ngcontent-ng-c632272801]:hover   [data-ic-icon][_ngcontent-ng-c632272801], a[_ngcontent-ng-c632272801]:focus   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-dark)}a.active[_ngcontent-ng-c632272801]{background-color:var(--theme-dark-secondary);cursor:unset;color:var(--theme-light)}a.active[_ngcontent-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-light)}[_nghost-ng-c632272801]{display:flex}@media only screen and (max-width: 600px){[_nghost-ng-c632272801]{flex-direction:row}[_nghost-ng-c632272801]   a[_ngcontent-ng-c632272801]{text-align:center;flex-grow:1}[_nghost-ng-c632272801]   .title[_ngcontent-ng-c632272801]{display:none}[_nghost-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--font-size: 1.2rem}}@media only screen and (min-width: 600px){[_nghost-ng-c632272801]{flex-direction:column}[_nghost-ng-c632272801]   a[_ngcontent-ng-c632272801]{text-align:left}[_nghost-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{display:none}}a[_ngcontent-ng-c632272801]{background-color:var(--theme-dark);display:block;border:1px solid var(--theme-tertiary);box-sizing:border-box;padding:5px 15px;cursor:pointer;transition:all .3s;font-variant:small-caps;font-size:.9rem;text-decoration:none}</style><style ng-app-id="ng">[_nghost-ng-c1206199484]{--background-color: var(--theme-accent);--font-size: 1rem;display:contents}span[_ngcontent-ng-c1206199484]{background-color:var(--background-color);width:var(--font-size);height:var(--font-size)}a[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}a:hover[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:hover   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:active[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:active   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}a.active[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a.active   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}</style><style ng-app-id="ng">.details[_ngcontent-ng-c2428032693]{margin-top:20px;font-size:.7rem;scrollbar-width:thin}.details[_ngcontent-ng-c2428032693]   .summary[_ngcontent-ng-c2428032693]{cursor:pointer;font-variant:small-caps}.article-metadata[_ngcontent-ng-c2428032693]{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;flex-wrap:wrap}.article-metadata[_ngcontent-ng-c2428032693] > *[_ngcontent-ng-c2428032693]{padding:10px 0 0}@media only screen and (min-width: 600px){.article-metadata[_ngcontent-ng-c2428032693]{flex-direction:row}}</style><link rel="https://dev.to/bwca/typed-dates-conversion-with-typescript-49n7"></head>
  <body><!--nghm-->
    <div data-ic-root _nghost-ng-c3775897885 class="ng-tns-c3775897885-0" ng-version="18.0.3" ngh="6" ng-server-context="ssg"><header _ngcontent-ng-c3775897885 data-ic-logo class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromTop" _nghost-ng-c1712305223 ngh="0"><a _ngcontent-ng-c1712305223 href="/home"><img _ngcontent-ng-c1712305223 src="./logo.png" alt="logo, depicting a ginger cat in a box"></a></header><nav _ngcontent-ng-c3775897885 data-ic-social-buttons class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromBottom" _nghost-ng-c3947245871 ngh="0"><a _ngcontent-ng-c3947245871 target="_blank" href="https://github.com/Bwca" title="GitHub"><span _ngcontent-ng-c3947245871 data-ic-icon iconname="github" _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/github.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span></a><a _ngcontent-ng-c3947245871 target="_blank" href="https://www.linkedin.com/in/volodymyr-yepishev" title="LinkedIn"><span _ngcontent-ng-c3947245871 data-ic-icon iconname="linkedin" _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/linkedin.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span></a></nav><nav _ngcontent-ng-c3775897885 data-ic-navigation class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromLeft" _nghost-ng-c632272801 ngh="1"><!----><a _ngcontent-ng-c632272801 routerlinkactive="active" title="home" href="/home" class="ng-star-inserted" style><span _ngcontent-ng-c632272801 data-ic-icon _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/home.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span><span _ngcontent-ng-c632272801 class="title">home</span></a><!----><!----><a _ngcontent-ng-c632272801 routerlinkactive="active" title="articles" href="/dev-articles" class="ng-star-inserted" style><span _ngcontent-ng-c632272801 data-ic-icon _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/book.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span><span _ngcontent-ng-c632272801 class="title">articles</span></a><!----><!----></nav><main _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromRight"><section _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0 ng-trigger ng-trigger-routeAnimations"><router-outlet _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0"></router-outlet><div _nghost-ng-c2428032693 data-ic-article-view class="ng-star-inserted" style ngh="5"><div _ngcontent-ng-c2428032693 data-ic-breadcrumbs _nghost-ng-c1373225446 class="ng-star-inserted" ngh="2"><div _ngcontent-ng-c1373225446><span _ngcontent-ng-c1373225446 class="ng-star-inserted"> / <a _ngcontent-ng-c1373225446 href="/dev-articles">Articles</a> /  Typed Dates Conversion with Typescript </span><!----><!----><!----><!----></div></div><!----><!----><!----><section _ngcontent-ng-c2428032693 class="article-metadata"><section _ngcontent-ng-c2428032693 data-ic-accordion class="details ng-tns-c2942593920-1 ng-star-inserted" _nghost-ng-c2942593920 ngh="3"><button _ngcontent-ng-c2942593920 class="ng-tns-c2942593920-1"><span _ngcontent-ng-c2428032693 ngprojectas="summary" class="summary ng-tns-c2942593920-1">article metadata</span></button><br _ngcontent-ng-c2942593920 class="ng-tns-c2942593920-1"><!----></section><!----></section><section _ngcontent-ng-c2428032693 data-ic-markdown _nghost-ng-c1847889374 ngh="4"><markdown _ngcontent-ng-c1847889374 clipboard ngh="0"><pre><code class="language-ic-metadata">{
  "name": "Typed Dates Conversion with Typescript",
  "series": null,
  "date": "2022-06-30",
  "lastModifiedDate": "2022-06-30",
  "author": "Volodymyr Yepishev",
  "tags": ["typescript", "tutorial", "generics", "conversion", "date", "moment"],
  "canonicalLink": "https://dev.to/bwca/typed-dates-conversion-with-typescript-49n7"
}
</code></pre>
<h1>Typed Dates Conversion with Typescript</h1>
<p>Links to repos are in the footer of the article.</p>
<p>We can't pass objects like <code>Date</code> between frontend and backend, we pass strings (or can pass numbers). Yet, sometimes 
primitives like strings or numbers are not what frontend actually needs, so they are converted into something more
suitable, like <code>Date</code>, <code>Moment</code> or whatever object representation. In javascript it might not be a big deal, but
when you try to describe your frontend entities with typescript interfaces, you immediately run into problems. Suppose
you have the following <code>User</code> interface coming from an api:</p>
<pre><code class="language-typescript">interface User {
  registered: string;
  name: string;
  lastLoginDate: string | null;
  details: Details;
  activities: Activity[];
}

interface Details {
  birthday: string;
  place: string;
}

interface Activity {
  place: string;
  date: string;
}
</code></pre>
<p>So there are some date fields which come as strings, but as you operate with, let's say, <code>Date</code> on the frontend for 
adding/removing time or whatever, so you set up a layer of mappers for conversion of string representation of dates into
<code>Date</code> when you receive them and then <code>Date</code> back to <code>string</code> when you need to send those back to a backend. But then
what to do with types on the interfaces? Create new ones with <code>Date</code>? Use generics? Go for unions?</p>
<p>For some time I had an idea that such mapper should be a single function that modifies an object of any given depth and 
does conversion of dates both on the object and in the interface, eliminating the need for additional interfaces to be
created. And this is the story how I tackled the problem.</p>
<p>Obviously it isn't a problem to convert dates in an object from string to some object representation, the real problem
is how to type those. From typescript generic perspective, there's no telling if a string or a number is a date, however
if union type is used, then it can be narrowed down with a generic, and that's the approach that can be used.</p>
<p>Therefore, any date is an ambiguous union, which can be presented by a generic type</p>
<pre><code class="language-typescript"> type AmbiguousDate&lt;ObjectDate, PrimitiveDate&gt; = ObjectDate | PrimitiveDate | null;
</code></pre>
<p>in which <code>ObjectDate</code> is <code>Date</code> or any other object type and <code>PrimitiveDate</code> is <code>number</code> or <code>string</code>.</p>
<p>Let's update our <code>User</code> interface now and make all dates there union types with <code>Date</code>:</p>
<pre><code class="language-typescript">interface User {
  registered: Date | string;
  name: string;
  lastLoginDate: Date | string | null;
  details: Details;
  activities: Activity[];
}

interface Details {
  birthday: Date | string;
  place: string;
}

interface Activity {
  place: string;
  date: Date | string;
}
</code></pre>
<p>We've made it so ambiguous that if used inside an application it would require constant checks to narrow the types. Yet,
this can be done using a generic, which would accept:</p>
<ul>
<li>the type of the object being converted;</li>
<li>target date type to narrow down the union;</li>
<li>object date type of the union to perform check;</li>
<li>primitive date type of the union to perform checks.</li>
</ul>
<p>It would also need to traverse down the object into its nested objects/arrays and check those too, but it should remove
the ambiguity, so we'll call this generic type <code>DeepNonAmbiguousDate</code> ('cos I suck at naming).</p>
<pre><code class="language-typescript">type DeepNonAmbiguousDate&lt;T, TargetDateType extends AmbiguousDate&lt;ObjectDate, PrimitiveDate&gt;, ObjectDate, PrimitiveDate&gt; = {
    [K in keyof T]: T[K] extends AmbiguousDate&lt;ObjectDate, PrimitiveDate&gt;
        ? T[K] extends NonNullable&lt;ObjectDate | PrimitiveDate&gt;
            ? T[K] extends PrimitiveDate
                ? T[K]
                : TargetDateType
            : TargetDateType | null
        : T[K] extends Array&lt;infer A&gt;
        ? Array&lt;DeepNonAmbiguousDate&lt;A, TargetDateType, ObjectDate, PrimitiveDate&gt;&gt;
        : T[K] extends object
        ? DeepNonAmbiguousDate&lt;T[K], TargetDateType, ObjectDate, PrimitiveDate&gt;
        : T[K];
};
</code></pre>
<p>Now we can force all dates in a user to be of <code>Date</code> type:</p>
<pre><code class="language-typescript">const user: DeepNonAmbiguousDate&lt;User, Date, Date, string&gt; = {
    activities: [{
        date: new Date(),
        place: ''
    }],
    details: {
        birthday: new Date(),
        place: ''
    },
    lastLoginDate: new Date(),
    name: '',
    registered: new Date()
}
</code></pre>
<p>Looks good, generic is powerful, but there's no actual conversion, generic itself is not enough, besides there's no link
between its 2nd and 3rd argument.</p>
<p>Let's think about a converter for a second. It should be able to convert from object to primitive and back, without 
the actual knowledge of which primitive or object it converts into, otherwise it becomes biased and is tied to certain
types. This means we cannot really implement it to work with any types, unless we provide means for consumers to provide
their functions for conversion. This would boil over converter to an object tree walker applying provided functions to
different fields. The only certain knowledge that we have is that primitive type for a date can be either <code>string</code> or 
<code>number</code>.</p>
<pre><code class="language-typescript">type PrimitiveDateType = string | number;
</code></pre>
<p>So to produce our converter with a factory function, we'd need 4 functions actually:</p>
<ul>
<li>one to check if a property is of primitive date type;</li>
<li>one to check if a property is of object date type;</li>
<li>one to convert primitive date to object date;</li>
<li>one to convert object date to primitive date.</li>
</ul>
<p>Since there's 4 params, we can pack them into a payload object:</p>
<pre><code class="language-typescript">interface RecursiveDeepDateConverterFactoryPayload&lt;PrimitiveDate extends PrimitiveDateType, ObjectDate&gt; {
    converterToJsDate: (d: PrimitiveDate) =&gt; ObjectDate;
    converterFromJsDate: (d: ObjectDate) =&gt; PrimitiveDate;
    checkTypeofDate: (d: unknown) =&gt; boolean;
    checkTypeofPrimitive: (d: PrimitiveDate) =&gt; boolean;
}
</code></pre>
<p>The converter we're producing can also be represented by a generic</p>
<pre><code class="language-typescript">type RecursiveDateConverter&lt;PrimitiveDate, ObjectDate&gt; = &lt;T, TargetDateType extends PrimitiveDate | ObjectDate&gt;(
    obj: T
) =&gt; DeepNonAmbiguousDate&lt;T, TargetDateType, ObjectDate, PrimitiveDate&gt;;
</code></pre>
<p>So it will accept an object and a target date type for conversion in generic, while the conversion itself will be done
using the functions provided to it.</p>
<p>All what's left is to create the factory function:</p>
<pre><code class="language-typescript">function createRecursiveDateConverter&lt;PrimitiveDate extends PrimitiveDateType, ObjectDate&gt;({
    checkTypeofDate,
    checkTypeofPrimitive,
    converterFromJsDate,
    converterToJsDate,
}: RecursiveDeepDateConverterFactoryPayload&lt;PrimitiveDate, ObjectDate&gt;): RecursiveDateConverter&lt;PrimitiveDate, ObjectDate&gt; {
    return function recursiveDateConverter&lt;T, TargetDateType extends PrimitiveDate | ObjectDate&gt;(
        obj: T
    ): DeepNonAmbiguousDate&lt;T, TargetDateType, ObjectDate, PrimitiveDate&gt; {
        for (const k in obj) {
            if (!Object.prototype.hasOwnProperty.call(obj, k)) {
                continue;
            }

            const value: unknown = obj[k];

            if (Array.isArray(value)) {
                value.map(recursiveDateConverter);
                continue;
            }

            if (typeof value === 'object') {
                if (checkTypeofDate(value)) {
                    // @ts-ignore
                    obj[k] = converterFromJsDate(value);
                    continue;
                }
                // @ts-ignore
                obj[k] = recursiveDateConverter(value);
            }

            if (checkTypeofPrimitive(&lt;PrimitiveDate&gt;value)) {
                // @ts-ignore
                obj[k] = converterToJsDate(value);
            }
        }
        return obj as DeepNonAmbiguousDate&lt;T, TargetDateType, ObjectDate, PrimitiveDate&gt;;
    };
}
</code></pre>
<p>So it creates a converter walking down the object tree, doing checks and conversions with provided functions. Which means
it is quite flexible, it doesn't make assumptions about primitive date being string or an object date being <code>Date</code>.</p>
<p>Let's try to use it on a <code>User</code> with string dates:</p>
<pre><code class="language-typescript">const user: User = {
    activities: [{
        date: '1991-12-12',
        place: ''
    }],
    details: {
        birthday: '1991-12-12',
        place: ''
    },
    lastLoginDate: '1991-12-12',
    name: '',
    registered: '1991-12-12'
}
</code></pre>
<p>Creating a converter, for the sake of simplicity we assume dates are any string with 8 digits with hyphens:</p>
<pre><code class="language-typescript">const deepDateConverter = createRecursiveDateConverter&lt;string, Date&gt;({
    checkTypeofDate: (v: unknown) =&gt; v instanceof Date,
    checkTypeofPrimitive: (v: string | number) =&gt; typeof v === 'string' &amp;&amp; /^\d{4}(-\d{2}){2}$/.test(v),
    converterFromJsDate: (d: Date) =&gt; d.toISOString(),
    converterToJsDate: (d: string) =&gt; new Date(d)
});
</code></pre>
<p>Now we can convert all string dates of an object (not necessary a <code>User</code>) from strings to <code>Date</code>:</p>
<pre><code class="language-typescript">const convertedUser = deepDateConverter&lt;User, Date&gt;(user);
</code></pre>
<p>And then we can convert them back if we want strings:</p>
<pre><code class="language-typescript">const convertedUser2 = deepDateConverter&lt;typeof convertedUser, Date&gt;(convertedUser);
</code></pre>
<p>Pretty cool, eh? :D</p>
<p>The caveat here is conversion always goes from one direction to another and type is hint is set using generic, so these
are two different things: pass wrong date type to generic, get wrong hints :)</p>
<h3>Links</h3>
<p><a href="https://www.typescriptlang.org/play?jsx=0#code/C4TwDgpgBAggtgIwJYHMCuB7NBnAIgQ2AgB4B5BAKwgGNgCiAaKABQCck4lgkA3CeiAD4oAXijkqtAVAA+Ldp259pcgHZoANhoDcAKF2hIUXBAhgAchlXxk6LHkIkAKkyf5WKCHUdPw0CAAeRKoAJtiwiKiYOAJklDTejPIcXLz8joJMEgkCTGwpSulEwmIA3rpQlVAA2gDSUEiqUADWECAYAGZQTgC6AFzddT1QgcFhEbbRDkRxkokQeQqpyhkVVesA-IO1w6MQoeGWquaaGvgIGiTZUo6yyYppAoJr669QW05DI0H74-kPKyILzeII+Q2BINeAzcHi8Al8kAhIOh7k88wR0DUpyRlWhXz2B1grFY+BAxEaHQgrFgz0hWxgxNJxBMZiONii9liMFcqLhPj8WXiNyS-2WRSEtOR212P0JGCFwBx72MpgsVnZdhijmInx2PNh6IF4gVuXuYqeSrxOz0AF89AY-GbCvDHWJsMB2KoUHd1IgqfbGkRWB18NRoAAlGhoVjYR6qgQAYSsfFYQYAYqHgBhWCBmKSNBh8CFiKLnbcCX8lmWiBjBXMnlByutqMmqUGnBgAFLTCADAAUIQGpcejgAlKJhNd5npm63U1S06wMHBuwJ+4PjfWxxOnSOiDOqtQABY0ZoYzprqADgZoVTNVQYADuqnHImECAwGEu+FUB8qx9Pc8OmHPh1yHKs9wgV930-b9f10G19EMCMoxjSCk1UFMgxLCDAQWTccgyUQoB1fU0RdIwK3CEDxTuKcnj7YF5QoaFdGglVWXVSJNR7Ujul5Q1IDrQiRVw8VBHtDpb1oJArCgahWAgRxI2oaNYzwjCsKpHCCkg74xmosSKPw+iMj7JtDxPagzz8C9HAYYEAOsoCaIc2dMLbBclxXHs3MPOd2y7XyEIGFS1LjMxEwChdM2zXN80LYsaNNUzilHULUPU8VNM81gdIBcVhOFIRG2BRTgGjJopNUGS5MU1S0I06K8pcfiDWM-TfkM3S8Lok0zKVZjWPWdKOLVaxuKmWJWphcj+SEgjisWHrxNKyEOmzK8W1Ud0WgaJpmPHCzIUqJAuj7ABCKcADowCXLNkOuo98GwUhnzYDBIFTEBruofAtD7ZimGaUcjqVSFtu4dQID-E7EPB-yduAKAeH+tBeygW97yfJoxGY6pmh6e0TqqM6rwZEkfqQbAKdJPtUY0dHQbWknXgZ9HrrgfAwD7erwqajz51YUdYdZ+SrCh9HRZBeGxbJvtkM6FG0egEQ1agAByZiEg1sGxfWeWnJsyA7KIemVeZ479fWAB6G2oAAAWAbAAFpUAfRSEZJ-HCeI7atNYRdl1XRxzcZqDpetyHGilr3XkQ63Kjtx3nbdlAPYgOP1h94YxD5xrsuasOmcj+P9Dl86jZcsS+3y80MnZqC9cT5Ondd93s0zxOoBzv3mo7EOzcbkW44TmWlXKyqe8oKAXrGtlJs5bUZoE4yivmZaCqeWG7QQ-RdEDKkQzDKAAFVsCpFnFJQamgwgDcVCgd1PRQA9VHwOAMefxpX7WM53QADIYBvqoS8j9v5eh9KcA8IQvD4CQBobAAwTDAHgYgg8mZeCpAgEg2AMkeBcBANUIme8D6qCDMfaAKC0HhAssgVMR4QikmQbcOQEDf6VDAGcMMAx2G2n0IfYMoZoAwHwYQlmXDhG8I9D-GBjgWFEDuHw0h21do4CpAMc+l8yi6AAJCYIIdwHBAxqjlF0bophRABgawAIwAE47E2JdjYgATM4lxGsHLmMkTwzWGs9E2h6F42BqCEG4LMbo+hwBGHMM1vYxx7j3GeL0bonxGMNb+N0TaLx-9gBAJAZeWxDinGuKSV49+n9rHJN0dfW+VJ77WPiSUtxrj-Hw1UcjWBkVHA5SFn7RSylMroWasQdhTAGJWyrrZDol56Y3jvA+Z87EeD7XdD+MMStciOSssbCAnQaL9h4NIl+UC-TCx3IrLoKy1ZiA1uwjWUAABkjyoA2wAHoAB0QilAACw2j7C7L5pQXE2lHMCm0AASG210iDunpqOPy-5mpBx8rMh+243xQBCDCjAABJAAyqQfFMivR9gRY5fuQU0XHJ-uxVQEBHzGFDiEUcCER66A6eLQWRAQhaOpGILpYAorcu0ny8ZZl1HCz0Kor8EBroFhQH2AABv9DQWLHDhHcNARZTKrFQAhaUao-tPK8ovqwa6tT3T1JCEwY185TVUmuiEmh10okxJALa6KDrzW5PyY0U0dqeV8uugY7B2BqgAAYehOscNGiAKYQB9iQDuZNjQ1k1T2V0AQo4bRKtZRyqwu1A33z5S44igrhUB2IJcrlWlvXiuKH2Yt3qR4ysuPK4ByrVXqthbPRSUAdWXgNUar1paLUQBvlaxSNra0mrHc6sJrqkAMKYR62d9qx2+uAf6+y66g1mpcSGsRRjw1RpjUQONCak0XOmQ0UQ6s7kkpQLrXNo4gA">Typescript playground</a></p>
<p><a href="https://www.npmjs.com/package/@merry-solutions/typed-date-converter">NPM package</a></p>
<p><a href="https://github.com/Bwca/package__merry-solutions__typed-date-converter">Github repo</a></p>
</markdown><!----></section></div><!----></section></main></div>
  <link rel="modulepreload" href="chunk-76TOWMZK.js"><script src="polyfills-UD7OJCHV.js" type="module"></script><script src="scripts-MI2AUGIN.js" defer></script><script src="main-PXGKGM4N.js" type="module"></script>

<script id="ng-state" type="application/json">{"341425767":{"b":[{"metadata":{"name":"Create a Custom eslint Rule with Typescript","series":null,"date":"2021-04-02","lastModifiedDate":"2021-07-11","author":"Volodymyr Yepishev","tags":["typescript","tutorial","eslint","npm"],"canonicalLink":"https://dev.to/bwca/create-a-custom-eslint-rule-with-typescript-4j3d"},"path":"2021-04-02-create-a-custom-eslint-rule-with-typescript.md"},{"metadata":{"name":"Create Object Property String Path Generator with Typescript","series":null,"date":"2021-04-13","lastModifiedDate":"2021-04-13","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","react"],"canonicalLink":"https://dev.to/bwca/create-object-property-string-path-generator-with-typescript-13e3"},"path":"2021-04-13-create-object-property-string-path-generator-with-typescript/2021-04-13-create-object-property-string-path-generator-with-typescript.md"},{"metadata":{"name":"Build Entity-Friendly react-router Paths Generator with Typescript","series":null,"date":"2021-05-12","lastModifiedDate":"2021-05-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/build-entity-friendly-react-router-paths-generator-with-typescript-fpd"},"path":"2021-05-12-build-entity-friendly-react-router-path-generator-with-typescript.md"},{"metadata":{"name":"Split Collection Based on Enum Value with Typescript","series":null,"date":"2021-06-28","lastModifiedDate":"2021-06-28","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/split-collection-based-on-enum-value-with-typescript-4g3b"},"path":"2021-06-28-split-collection-based-on-enum-values/2021-06-28-split-collection-based-on-enum-values.md"},{"metadata":{"name":"Make Your Own Linkedin Promoted Posts Blocker","series":null,"date":"2021-07-14","lastModifiedDate":"2021-07-14","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/make-your-own-linkedin-promoted-posts-blocker-fj5"},"path":"2021-07-14-make-you-own-linkedin-promoted-posts-blocker.md"},{"metadata":{"name":"How I Decided to Write React cli and How it Went","series":null,"date":"2021-08-08","lastModifiedDate":"2021-08-08","author":"Volodymyr Yepishev","tags":["angular"],"canonicalLink":"https://dev.to/bwca/how-i-decided-to-write-react-cli-and-how-it-went-4f19"},"path":"2021-08-08-how-i-decided-to-write-react-cli-and-how-it-went/2021-08-08-how-i-decided-to-write-react-cli-and-how-it-went.md"},{"metadata":{"name":"Remove Double Imports with Regular Expression","series":null,"date":"2022-03-29","lastModifiedDate":"2022-03-29","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/remove-double-imports-with-regular-expression-47af"},"path":"2022-03-29-remove-double-imports-with-regular-expression.md"},{"metadata":{"name":"Decorating React Hook with Typescript","series":null,"date":"2022-04-12","lastModifiedDate":"2022-04-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/decorating-react-hook-with-typescript-bd9"},"path":"2022-04-12-decorating-react-hook-with-typescript.md"},{"metadata":{"name":"Override Method Return with a Decorator","series":null,"date":"2022-04-22","lastModifiedDate":"2022-04-22","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/override-method-return-with-a-decorator-1bii"},"path":"2022-04-22-change-api-response-with-a-decorator.md"},{"metadata":{"name":"Turn Angular Application into Chrome Extension","series":null,"date":"2022-05-25","lastModifiedDate":"2022-05-25","author":"Volodymyr Yepishev","tags":["angular","tutorial","chrome","extension"],"canonicalLink":"https://dev.to/bwca/turn-angular-application-into-chrome-extension-2mkn"},"path":"2022-05-25-turn-angular-application-into-chrome-extension.md"},{"metadata":{"name":"Typed Dates Conversion with Typescript","series":null,"date":"2022-06-30","lastModifiedDate":"2022-06-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","generics","conversion","date","moment"],"canonicalLink":"https://dev.to/bwca/typed-dates-conversion-with-typescript-49n7"},"path":"2022-06-30-typed-date-conversion-with-typescript.md"},{"metadata":{"name":"Weekday - Date - Month type","series":null,"date":"2022-07-29","lastModifiedDate":"2022-07-29","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/weekday-date-month-type-26j4"},"path":"2022-07-29-week-day-date-month-type.md"},{"metadata":{"name":"An Alternative Way of Creating Enumerations in Typescript","series":null,"date":"2022-08-03","lastModifiedDate":"2022-08-03","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/an-alternative-way-of-creating-enumerations-in-typescript-579k"},"path":"2022-08-03-an-alternative-way-of-creating-enumerations-in-typescript.md"},{"metadata":{"name":"Create a Static Class in Typescript","series":null,"date":"2022-08-12","lastModifiedDate":"2022-08-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/create-a-static-class-in-typescript-5ao1"},"path":"2022-08-12-create-static-class-in-typescript.md"},{"metadata":{"name":"Typescript Class Mixins","series":null,"date":"2022-08-20","lastModifiedDate":"2022-08-20","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/typescript-class-mixins-3hib"},"path":"2022-08-20-typescript-class-mixins.md"},{"metadata":{"name":"Using Classes Inside React's Functional Components","series":null,"date":"2022-08-22","lastModifiedDate":"2022-08-22","author":"Volodymyr Yepishev","tags":["typescript","react","tutorial"],"canonicalLink":"https://dev.to/bwca/using-classes-inside-reacts-functional-components-oj3"},"path":"2022-08-22-using-classes-inside-react-functional-component.md"},{"metadata":{"name":"Debouncing Component Methods in Angular","series":null,"date":"2022-08-29","lastModifiedDate":"2022-08-29","author":"Volodymyr Yepishev","tags":["typescript","angular","tutorial"],"canonicalLink":"https://dev.to/bwca/debouncing-component-methods-in-angular-34im"},"path":"2022-08-29-debouncing-component-methods-in-angular.md"},{"metadata":{"name":"A Trick to Further Breaking Down Angular Components","series":null,"date":"2022-09-02","lastModifiedDate":"2022-09-02","author":"Volodymyr Yepishev","tags":["typescript","angular"],"canonicalLink":"https://dev.to/bwca/a-trick-to-further-breaking-down-angular-components-1i8a"},"path":"2022-09-02-a-trick-to-further-breaking-angular-components.md"},{"metadata":{"name":"Typed Enum Flipping in Typescript","series":null,"date":"2022-11-09","lastModifiedDate":"2022-11-09","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/typed-enum-flipping-in-typescript-2ce9"},"path":"2022-11-09-typed-enum-flipping-in-typescript.md"},{"metadata":{"name":"Typed Filtering with Generics in Typescript","series":null,"date":"2022-12-01","lastModifiedDate":"2022-12-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","generics"],"canonicalLink":"https://dev.to/bwca/typed-filtering-with-generics-in-typescript-204f"},"path":"2022-12-01-typed-filtering-with-generics.md"},{"metadata":{"name":"Template Driving Reactive Form Validation in Angular","series":null,"date":"2023-05-15","lastModifiedDate":"2023-05-15","author":"Volodymyr Yepishev","tags":["angular"],"canonicalLink":"https://dev.to/bwca/template-driving-reactive-form-validation-in-angular-302e"},"path":"2023-05-15-template-driving-reactive-form-validation/2023-05-15-template-driving-reactive-form-validation-in-angular.md"},{"metadata":{"name":"Detect Invalid FormGroup Tree in Angular","series":null,"date":"2023-05-17","lastModifiedDate":"2023-05-17","author":"Volodymyr Yepishev","tags":["angular","debugger"],"canonicalLink":"https://dev.to/bwca/detect-invalid-formgroup-tree-in-angular-1ed"},"path":"2023-05-17-detect-invalid-form-group-tree-in-angular/2023-05-17-detect-invalid-form-group-tree-in-angular.md"},{"metadata":{"name":"Safe Route Param Injection in Angular with a Decorator","series":null,"date":"2023-07-22","lastModifiedDate":"2023-07-28","author":"Volodymyr Yepishev","tags":["angular","tutorial","routing","generics"],"canonicalLink":"https://dev.to/bwca/safe-route-param-injection-in-angular-with-a-decorator-1lk7"},"path":"2023-07-22-safe-route-param-injection-in-angular-with-a-decorator.md"},{"metadata":{"name":"Deep Readonly Generic in Typescript","series":null,"date":"2023-09-16","lastModifiedDate":"2024-06-26","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/deep-readonly-generic-in-typescript-4b04"},"path":"2023-09-16-deep-readonly-generic-in-typescript.md"},{"metadata":{"name":"Typing Object Keys With Enum Values Using Typescript","series":null,"date":"2023-11-01","lastModifiedDate":"2023-11-01","author":"Volodymyr Yepishev","tags":["typescript","generics","tutorial"],"canonicalLink":"https://dev.to/bwca/typing-object-keys-with-enum-values-using-typescript-4k23"},"path":"2023-11-01-typing-object-keys-with-enum-values-using-typescript.md"},{"metadata":{"name":"How to Create Bookmarklets Using External Libraries like React","series":null,"date":"2024-03-13","lastModifiedDate":"2024-03-13","author":"Volodymyr Yepishev","tags":["javascript","tutorial"],"canonicalLink":"https://dev.to/bwca/how-to-create-bookmarklets-using-libraries-like-react-2bhc"},"path":"2024-03-13-how-to-create-bookmarklets-using-external-libraries-like-react/2024-03-13-how-to-create-bookmarklets-using-external-libraries-like-react.md"},{"metadata":{"name":"Annoying Cat Extension","series":null,"date":"2024-03-29","lastModifiedDate":"2024-03-29","author":"Volodymyr Yepishev","tags":["javascript","tutorial"],"canonicalLink":"https://dev.to/bwca/annoying-cat-extension-4eaf"},"path":"2024-03-29-writing-annoying-image-browser-extension/2024-03-29-writing-annoying-image-browser-extension.md"},{"metadata":{"name":"Improving Dynamic Component Loader Typings in Angular Using Inputs","series":null,"date":"2024-04-15","lastModifiedDate":"2024-04-15","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","generics"],"canonicalLink":"https://dev.to/bwca/improving-dynamic-component-loader-typings-in-angular-using-inputs-obl"},"path":"2024-04-15-improving-dynamic-component-loader-typings-in-angular-using-inputs/2024-04-15-improving-dynamic-component-loader-typings-in-angular-using-inputs.md"},{"metadata":{"name":"Reducing the Boilerplate for Services Utilizing Subjects in Angular","series":null,"date":"2024-05-06","lastModifiedDate":"2024-05-06","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","rxjs"],"canonicalLink":"https://dev.to/bwca/reducing-the-boilerplate-for-services-utilizing-subjects-in-angular-44fp"},"path":"2024-05-06-reducing-the-boilerplate-for-stateful-services-in-angular/2024-05-06-reducing-the-boilerplate-for-stateful-services-in-angular.md"},{"metadata":{"name":"Crafting a Global State Hook in React","series":null,"date":"2024-05-18","lastModifiedDate":"2024-05-18","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react","state"],"canonicalLink":"https://dev.to/bwca/crafting-a-global-state-hook-in-react-4hb4"},"path":"2024-05-18-crafting-a-global-state-hook-in-react/2024-05-18-crafting-a-global-state-hook-in-react.md"},{"metadata":{"name":"Abstracting State Management in React with Typescript, and its Benefits","series":null,"date":"2024-06-03","lastModifiedDate":"2024-06-03","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular"],"canonicalLink":"https://dev.to/bwca/abstracting-state-management-in-react-with-typescript-and-its-benefits-8mk"},"path":"2024-06-03-abstracting-state-management-in-react-and-its-benefits/2024-06-03-abstracting-state-management-in-react-and-its-benefits.md"},{"metadata":{"name":"Runtime Environment Config in Angular, but without Dependency Injection","series":null,"date":"2024-06-08","lastModifiedDate":"2024-06-08","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular"],"canonicalLink":"https://dev.to/bwca/runtime-environment-config-in-angular-but-without-dependency-injection-kno"},"path":"2024-06-08-runtime-environment-config-in-angular-but-without-dependency-injection/2024-06-08-runtime-environment-config-in-angular-but-without-dependency-injection.md"},{"metadata":{"name":"Create a Debounce Function from Scratch in Typescript","series":{"name":"Implementing Debounce with Typescript","part":0},"date":"2021-08-26","lastModifiedDate":"2022-04-07","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/create-a-debounce-function-from-scratch-in-typescript-560m"},"path":"create-a-debounce-function-from-scratch-in-typescript/2021-08-26-part-0-create-a-debounce-function-from-scratch-in-typescript.md"},{"metadata":{"name":"Polish Types for the New Debounce Function","series":{"name":"Implementing Debounce with Typescript","part":1},"date":"2022-04-06","lastModifiedDate":"2022-04-06","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/polish-types-for-the-new-debounce-function-5e0n"},"path":"create-a-debounce-function-from-scratch-in-typescript/2022-04-06-part-1-polish-types-for-the-new-debounce-function.md"},{"metadata":{"name":"Caching Decorator","series":{"name":"Decorator Memoization","part":0},"date":"2022-06-06","lastModifiedDate":"2024-06-26","author":"Volodymyr Yepishev","tags":["typescript","tutorial","decorators"],"canonicalLink":"https://dev.to/bwca/caching-decorator-52e1"},"path":"decorator-memoization/2022-06-06-part-0-caching-decorator.md"},{"metadata":{"name":"Memoize Decorator","series":{"name":"Decorator Memoization","part":1},"date":"2022-07-12","lastModifiedDate":"2022-07-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","decorators"],"canonicalLink":"https://dev.to/bwca/memoize-decorator-5aoo"},"path":"decorator-memoization/2022-07-12-part-1-memoize-decorator.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 0: Intro","series":{"name":"Implementing React Check Permissions","part":0},"date":"2021-10-29","lastModifiedDate":"2021-10-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-reach-check-permissions-part-0-intro-1inc"},"path":"impementing-react-check-permission/2021-10-29-part-0-intro.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 1: Check Permissions Function","series":{"name":"Implementing React Check Permissions","part":1},"date":"2021-10-30","lastModifiedDate":"2021-10-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-reach-check-permissions-part-1-check-permissions-function-136l"},"path":"impementing-react-check-permission/2021-10-30-part-1-check-permissions-function.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 2: Check Permissions Hook","series":{"name":"Implementing React Check Permissions","part":2},"date":"2021-11-01","lastModifiedDate":"2021-11-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-react-check-permissions-the-hook-3m20"},"path":"impementing-react-check-permission/2021-11-01-part-2-use-check-permissions.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 3: with Permissions Component","series":{"name":"Implementing React Check Permissions","part":3},"date":"2021-11-04","lastModifiedDate":"2021-11-04","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-react-check-permissions-the-component-3gjm"},"path":"impementing-react-check-permission/2021-11-04-part-3-with-permissions-component.md"},{"metadata":{"name":"Iframe Microfrontends: Intro and Setup","series":{"name":"Iframe Microfrontends","part":0},"date":"2022-05-30","lastModifiedDate":"2022-05-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-intro-and-setup-1g7h"},"path":"implement-iframe-microfrontend/2022-05-30-part-0-intro-and-setup.md"},{"metadata":{"name":"Iframe Microfrontends: Standalone React Application","series":{"name":"Iframe Microfrontends","part":1},"date":"2022-05-31","lastModifiedDate":"2022-05-31","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-standalone-react-application-341f"},"path":"implement-iframe-microfrontend/2022-05-31-part-1-standalone-react-application.md"},{"metadata":{"name":"Iframe Microfrontends: Angular Shell","series":{"name":"Iframe Microfrontends","part":2},"date":"2022-05-31","lastModifiedDate":"2022-05-31","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-angular-shell-pmj"},"path":"implement-iframe-microfrontend/2022-05-31-part-2-angular-shell-application.md"},{"metadata":{"name":"Iframe Microfrontends: Make React App Proper Iframe","series":{"name":"Iframe Microfrontends","part":3},"date":"2022-06-01","lastModifiedDate":"2022-06-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-make-react-app-proper-iframe-12g9"},"path":"implement-iframe-microfrontend/2022-06-01-part-3-make-react-app-proper-iframe.md"},{"metadata":{"name":"Create Singleton with ES2022","series":{"name":"Singleton","part":1},"date":"2022-06-25","lastModifiedDate":"2022-07-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","javascript"],"canonicalLink":"https://dev.to/bwca/create-singleton-with-es2022-51ic"},"path":"singleton/2022-06-25-part-1-create-singleton-with-es2022.md"},{"metadata":{"name":"Singleton Decorator","series":{"name":"Singleton","part":0},"date":"2022-07-01","lastModifiedDate":"2022-07-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/singleton-decorator-526h"},"path":"singleton/2022-07-01-part-0-singleton-decorator.md"}],"h":{},"s":200,"st":"OK","u":"./articles/index.json","rt":"json"},"2913193220":{"b":"```ic-metadata\r\n{\r\n  \"name\": \"Typed Dates Conversion with Typescript\",\r\n  \"series\": null,\r\n  \"date\": \"2022-06-30\",\r\n  \"lastModifiedDate\": \"2022-06-30\",\r\n  \"author\": \"Volodymyr Yepishev\",\r\n  \"tags\": [\"typescript\", \"tutorial\", \"generics\", \"conversion\", \"date\", \"moment\"],\r\n  \"canonicalLink\": \"https://dev.to/bwca/typed-dates-conversion-with-typescript-49n7\"\r\n}\r\n```\r\n\r\n# Typed Dates Conversion with Typescript\r\n\r\nLinks to repos are in the footer of the article.\r\n\r\nWe can't pass objects like `Date` between frontend and backend, we pass strings (or can pass numbers). Yet, sometimes \r\nprimitives like strings or numbers are not what frontend actually needs, so they are converted into something more\r\nsuitable, like `Date`, `Moment` or whatever object representation. In javascript it might not be a big deal, but\r\nwhen you try to describe your frontend entities with typescript interfaces, you immediately run into problems. Suppose\r\nyou have the following `User` interface coming from an api:\r\n\r\n```typescript\r\ninterface User {\r\n  registered: string;\r\n  name: string;\r\n  lastLoginDate: string | null;\r\n  details: Details;\r\n  activities: Activity[];\r\n}\r\n\r\ninterface Details {\r\n  birthday: string;\r\n  place: string;\r\n}\r\n\r\ninterface Activity {\r\n  place: string;\r\n  date: string;\r\n}\r\n```\r\n\r\nSo there are some date fields which come as strings, but as you operate with, let's say, `Date` on the frontend for \r\nadding/removing time or whatever, so you set up a layer of mappers for conversion of string representation of dates into\r\n`Date` when you receive them and then `Date` back to `string` when you need to send those back to a backend. But then\r\nwhat to do with types on the interfaces? Create new ones with `Date`? Use generics? Go for unions?\r\n\r\nFor some time I had an idea that such mapper should be a single function that modifies an object of any given depth and \r\ndoes conversion of dates both on the object and in the interface, eliminating the need for additional interfaces to be\r\ncreated. And this is the story how I tackled the problem.\r\n\r\nObviously it isn't a problem to convert dates in an object from string to some object representation, the real problem\r\nis how to type those. From typescript generic perspective, there's no telling if a string or a number is a date, however\r\nif union type is used, then it can be narrowed down with a generic, and that's the approach that can be used.\r\n\r\nTherefore, any date is an ambiguous union, which can be presented by a generic type\r\n```typescript\r\n type AmbiguousDate\u003CObjectDate, PrimitiveDate> = ObjectDate | PrimitiveDate | null;\r\n```\r\n\r\nin which `ObjectDate` is `Date` or any other object type and `PrimitiveDate` is `number` or `string`.\r\n\r\nLet's update our `User` interface now and make all dates there union types with `Date`:\r\n\r\n```typescript\r\ninterface User {\r\n  registered: Date | string;\r\n  name: string;\r\n  lastLoginDate: Date | string | null;\r\n  details: Details;\r\n  activities: Activity[];\r\n}\r\n\r\ninterface Details {\r\n  birthday: Date | string;\r\n  place: string;\r\n}\r\n\r\ninterface Activity {\r\n  place: string;\r\n  date: Date | string;\r\n}\r\n```\r\n\r\nWe've made it so ambiguous that if used inside an application it would require constant checks to narrow the types. Yet,\r\nthis can be done using a generic, which would accept:\r\n* the type of the object being converted;\r\n* target date type to narrow down the union;\r\n* object date type of the union to perform check;\r\n* primitive date type of the union to perform checks.\r\n\r\nIt would also need to traverse down the object into its nested objects/arrays and check those too, but it should remove\r\nthe ambiguity, so we'll call this generic type `DeepNonAmbiguousDate` ('cos I suck at naming).\r\n\r\n```typescript\r\ntype DeepNonAmbiguousDate\u003CT, TargetDateType extends AmbiguousDate\u003CObjectDate, PrimitiveDate>, ObjectDate, PrimitiveDate> = {\r\n    [K in keyof T]: T[K] extends AmbiguousDate\u003CObjectDate, PrimitiveDate>\r\n        ? T[K] extends NonNullable\u003CObjectDate | PrimitiveDate>\r\n            ? T[K] extends PrimitiveDate\r\n                ? T[K]\r\n                : TargetDateType\r\n            : TargetDateType | null\r\n        : T[K] extends Array\u003Cinfer A>\r\n        ? Array\u003CDeepNonAmbiguousDate\u003CA, TargetDateType, ObjectDate, PrimitiveDate>>\r\n        : T[K] extends object\r\n        ? DeepNonAmbiguousDate\u003CT[K], TargetDateType, ObjectDate, PrimitiveDate>\r\n        : T[K];\r\n};\r\n```\r\n\r\nNow we can force all dates in a user to be of `Date` type:\r\n```typescript\r\nconst user: DeepNonAmbiguousDate\u003CUser, Date, Date, string> = {\r\n\tactivities: [{\r\n\t\tdate: new Date(),\r\n\t\tplace: ''\r\n\t}],\r\n\tdetails: {\r\n\t\tbirthday: new Date(),\r\n\t\tplace: ''\r\n\t},\r\n\tlastLoginDate: new Date(),\r\n\tname: '',\r\n\tregistered: new Date()\r\n}\r\n```\r\n\r\nLooks good, generic is powerful, but there's no actual conversion, generic itself is not enough, besides there's no link\r\nbetween its 2nd and 3rd argument.\r\n\r\nLet's think about a converter for a second. It should be able to convert from object to primitive and back, without \r\nthe actual knowledge of which primitive or object it converts into, otherwise it becomes biased and is tied to certain\r\ntypes. This means we cannot really implement it to work with any types, unless we provide means for consumers to provide\r\ntheir functions for conversion. This would boil over converter to an object tree walker applying provided functions to\r\ndifferent fields. The only certain knowledge that we have is that primitive type for a date can be either `string` or \r\n`number`.\r\n\r\n```typescript\r\ntype PrimitiveDateType = string | number;\r\n```\r\n\r\nSo to produce our converter with a factory function, we'd need 4 functions actually:\r\n* one to check if a property is of primitive date type;\r\n* one to check if a property is of object date type;\r\n* one to convert primitive date to object date;\r\n* one to convert object date to primitive date.\r\n\r\nSince there's 4 params, we can pack them into a payload object:\r\n\r\n```typescript\r\ninterface RecursiveDeepDateConverterFactoryPayload\u003CPrimitiveDate extends PrimitiveDateType, ObjectDate> {\r\n    converterToJsDate: (d: PrimitiveDate) => ObjectDate;\r\n    converterFromJsDate: (d: ObjectDate) => PrimitiveDate;\r\n    checkTypeofDate: (d: unknown) => boolean;\r\n    checkTypeofPrimitive: (d: PrimitiveDate) => boolean;\r\n}\r\n```\r\n\r\nThe converter we're producing can also be represented by a generic\r\n\r\n```typescript\r\ntype RecursiveDateConverter\u003CPrimitiveDate, ObjectDate> = \u003CT, TargetDateType extends PrimitiveDate | ObjectDate>(\r\n    obj: T\r\n) => DeepNonAmbiguousDate\u003CT, TargetDateType, ObjectDate, PrimitiveDate>;\r\n```\r\n\r\nSo it will accept an object and a target date type for conversion in generic, while the conversion itself will be done\r\nusing the functions provided to it.\r\n\r\nAll what's left is to create the factory function:\r\n\r\n```typescript\r\nfunction createRecursiveDateConverter\u003CPrimitiveDate extends PrimitiveDateType, ObjectDate>({\r\n    checkTypeofDate,\r\n    checkTypeofPrimitive,\r\n    converterFromJsDate,\r\n    converterToJsDate,\r\n}: RecursiveDeepDateConverterFactoryPayload\u003CPrimitiveDate, ObjectDate>): RecursiveDateConverter\u003CPrimitiveDate, ObjectDate> {\r\n    return function recursiveDateConverter\u003CT, TargetDateType extends PrimitiveDate | ObjectDate>(\r\n        obj: T\r\n    ): DeepNonAmbiguousDate\u003CT, TargetDateType, ObjectDate, PrimitiveDate> {\r\n        for (const k in obj) {\r\n            if (!Object.prototype.hasOwnProperty.call(obj, k)) {\r\n                continue;\r\n            }\r\n\r\n            const value: unknown = obj[k];\r\n\r\n            if (Array.isArray(value)) {\r\n                value.map(recursiveDateConverter);\r\n                continue;\r\n            }\r\n\r\n            if (typeof value === 'object') {\r\n                if (checkTypeofDate(value)) {\r\n                    // @ts-ignore\r\n                    obj[k] = converterFromJsDate(value);\r\n                    continue;\r\n                }\r\n                // @ts-ignore\r\n                obj[k] = recursiveDateConverter(value);\r\n            }\r\n\r\n            if (checkTypeofPrimitive(\u003CPrimitiveDate>value)) {\r\n                // @ts-ignore\r\n                obj[k] = converterToJsDate(value);\r\n            }\r\n        }\r\n        return obj as DeepNonAmbiguousDate\u003CT, TargetDateType, ObjectDate, PrimitiveDate>;\r\n    };\r\n}\r\n```\r\n\r\nSo it creates a converter walking down the object tree, doing checks and conversions with provided functions. Which means\r\nit is quite flexible, it doesn't make assumptions about primitive date being string or an object date being `Date`.\r\n\r\nLet's try to use it on a `User` with string dates:\r\n```typescript\r\nconst user: User = {\r\n\tactivities: [{\r\n\t\tdate: '1991-12-12',\r\n\t\tplace: ''\r\n\t}],\r\n\tdetails: {\r\n\t\tbirthday: '1991-12-12',\r\n\t\tplace: ''\r\n\t},\r\n\tlastLoginDate: '1991-12-12',\r\n\tname: '',\r\n\tregistered: '1991-12-12'\r\n}\r\n```\r\n\r\nCreating a converter, for the sake of simplicity we assume dates are any string with 8 digits with hyphens:\r\n```typescript\r\nconst deepDateConverter = createRecursiveDateConverter\u003Cstring, Date>({\r\n    checkTypeofDate: (v: unknown) => v instanceof Date,\r\n    checkTypeofPrimitive: (v: string | number) => typeof v === 'string' && /^\\d{4}(-\\d{2}){2}$/.test(v),\r\n    converterFromJsDate: (d: Date) => d.toISOString(),\r\n    converterToJsDate: (d: string) => new Date(d)\r\n});\r\n```\r\n\r\nNow we can convert all string dates of an object (not necessary a `User`) from strings to `Date`:\r\n```typescript\r\nconst convertedUser = deepDateConverter\u003CUser, Date>(user);\r\n```\r\n\r\nAnd then we can convert them back if we want strings:\r\n```typescript\r\nconst convertedUser2 = deepDateConverter\u003Ctypeof convertedUser, Date>(convertedUser);\r\n```\r\n\r\nPretty cool, eh? :D\r\n\r\nThe caveat here is conversion always goes from one direction to another and type is hint is set using generic, so these\r\nare two different things: pass wrong date type to generic, get wrong hints :)\r\n\r\n### Links\r\n[Typescript playground](https://www.typescriptlang.org/play?jsx=0#code/C4TwDgpgBAggtgIwJYHMCuB7NBnAIgQ2AgB4B5BAKwgGNgCiAaKABQCck4lgkA3CeiAD4oAXijkqtAVAA+Ldp259pcgHZoANhoDcAKF2hIUXBAhgAchlXxk6LHkIkAKkyf5WKCHUdPw0CAAeRKoAJtiwiKiYOAJklDTejPIcXLz8joJMEgkCTGwpSulEwmIA3rpQlVAA2gDSUEiqUADWECAYAGZQTgC6AFzddT1QgcFhEbbRDkRxkokQeQqpyhkVVesA-IO1w6MQoeGWquaaGvgIGiTZUo6yyYppAoJr669QW05DI0H74-kPKyILzeII+Q2BINeAzcHi8Al8kAhIOh7k88wR0DUpyRlWhXz2B1grFY+BAxEaHQgrFgz0hWxgxNJxBMZiONii9liMFcqLhPj8WXiNyS-2WRSEtOR212P0JGCFwBx72MpgsVnZdhijmInx2PNh6IF4gVuXuYqeSrxOz0AF89AY-GbCvDHWJsMB2KoUHd1IgqfbGkRWB18NRoAAlGhoVjYR6qgQAYSsfFYQYAYqHgBhWCBmKSNBh8CFiKLnbcCX8lmWiBjBXMnlByutqMmqUGnBgAFLTCADAAUIQGpcejgAlKJhNd5npm63U1S06wMHBuwJ+4PjfWxxOnSOiDOqtQABY0ZoYzprqADgZoVTNVQYADuqnHImECAwGEu+FUB8qx9Pc8OmHPh1yHKs9wgV930-b9f10G19EMCMoxjSCk1UFMgxLCDAQWTccgyUQoB1fU0RdIwK3CEDxTuKcnj7YF5QoaFdGglVWXVSJNR7Ujul5Q1IDrQiRVw8VBHtDpb1oJArCgahWAgRxI2oaNYzwjCsKpHCCkg74xmosSKPw+iMj7JtDxPagzz8C9HAYYEAOsoCaIc2dMLbBclxXHs3MPOd2y7XyEIGFS1LjMxEwChdM2zXN80LYsaNNUzilHULUPU8VNM81gdIBcVhOFIRG2BRTgGjJopNUGS5MU1S0I06K8pcfiDWM-TfkM3S8Lok0zKVZjWPWdKOLVaxuKmWJWphcj+SEgjisWHrxNKyEOmzK8W1Ud0WgaJpmPHCzIUqJAuj7ABCKcADowCXLNkOuo98GwUhnzYDBIFTEBruofAtD7ZimGaUcjqVSFtu4dQID-E7EPB-yduAKAeH+tBeygW97yfJoxGY6pmh6e0TqqM6rwZEkfqQbAKdJPtUY0dHQbWknXgZ9HrrgfAwD7erwqajz51YUdYdZ+SrCh9HRZBeGxbJvtkM6FG0egEQ1agAByZiEg1sGxfWeWnJsyA7KIemVeZ479fWAB6G2oAAAWAbAAFpUAfRSEZJ-HCeI7atNYRdl1XRxzcZqDpetyHGilr3XkQ63Kjtx3nbdlAPYgOP1h94YxD5xrsuasOmcj+P9Dl86jZcsS+3y80MnZqC9cT5Ondd93s0zxOoBzv3mo7EOzcbkW44TmWlXKyqe8oKAXrGtlJs5bUZoE4yivmZaCqeWG7QQ-RdEDKkQzDKAAFVsCpFnFJQamgwgDcVCgd1PRQA9VHwOAMefxpX7WM53QADIYBvqoS8j9v5eh9KcA8IQvD4CQBobAAwTDAHgYgg8mZeCpAgEg2AMkeBcBANUIme8D6qCDMfaAKC0HhAssgVMR4QikmQbcOQEDf6VDAGcMMAx2G2n0IfYMoZoAwHwYQlmXDhG8I9D-GBjgWFEDuHw0h21do4CpAMc+l8yi6AAJCYIIdwHBAxqjlF0bophRABgawAIwAE47E2JdjYgATM4lxGsHLmMkTwzWGs9E2h6F42BqCEG4LMbo+hwBGHMM1vYxx7j3GeL0bonxGMNb+N0TaLx-9gBAJAZeWxDinGuKSV49+n9rHJN0dfW+VJ77WPiSUtxrj-Hw1UcjWBkVHA5SFn7RSylMroWasQdhTAGJWyrrZDol56Y3jvA+Z87EeD7XdD+MMStciOSssbCAnQaL9h4NIl+UC-TCx3IrLoKy1ZiA1uwjWUAABkjyoA2wAHoAB0QilAACw2j7C7L5pQXE2lHMCm0AASG210iDunpqOPy-5mpBx8rMh+243xQBCDCjAABJAAyqQfFMivR9gRY5fuQU0XHJ-uxVQEBHzGFDiEUcCER66A6eLQWRAQhaOpGILpYAorcu0ny8ZZl1HCz0Kor8EBroFhQH2AABv9DQWLHDhHcNARZTKrFQAhaUao-tPK8ovqwa6tT3T1JCEwY185TVUmuiEmh10okxJALa6KDrzW5PyY0U0dqeV8uugY7B2BqgAAYehOscNGiAKYQB9iQDuZNjQ1k1T2V0AQo4bRKtZRyqwu1A33z5S44igrhUB2IJcrlWlvXiuKH2Yt3qR4ysuPK4ByrVXqthbPRSUAdWXgNUar1paLUQBvlaxSNra0mrHc6sJrqkAMKYR62d9qx2+uAf6+y66g1mpcSGsRRjw1RpjUQONCak0XOmQ0UQ6s7kkpQLrXNo4gA)\r\n\r\n[NPM package](https://www.npmjs.com/package/@merry-solutions/typed-date-converter)\r\n\r\n[Github repo](https://github.com/Bwca/package__merry-solutions__typed-date-converter)","h":{},"s":200,"st":"OK","u":"./articles/2022-06-30-typed-date-conversion-with-typescript.md","rt":"text"},"__nghData__":[{},{"t":{"1":"t0"},"c":{"1":[{"i":"t0","r":3,"t":{"0":"t1","1":"t2"},"c":{"0":[],"1":[{"i":"t2","r":1}]},"x":2}]}},{"e":{"1":4},"t":{"2":"t6","3":"t7"},"c":{"2":[{"i":"t6","r":2,"e":{"0":1}}],"3":[]}},{"t":{"3":"t8"},"c":{"3":[]}},{"c":{"0":[]}},{"t":{"0":"t3","2":"t4","9":"t9"},"c":{"0":[{"i":"t4","r":2,"t":{"0":"t5"},"c":{"0":[{"i":"t5","r":1}]}}],"2":[],"9":[]},"n":{"6":"5f2"},"d":[8]},{"c":{"6":[{"i":"c2428032693","r":1}]}}]}</script></body></html>