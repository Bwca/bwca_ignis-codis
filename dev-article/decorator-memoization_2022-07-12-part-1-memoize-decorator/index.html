<!DOCTYPE html><html lang="en-CA" dir="ltr" data-critters-container><head>
    <meta charset="utf-8">
    <title>Ignis Codis :  Memoize Decorator</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="logo.png">
  <style>:root{--theme-dark: #1e2019;--theme-dark-secondary: #393e41;--theme-light: #d3d0cb;--theme-accent: #e2c044;--theme-tertiary: #587b7f}button{transition:all .3s;color:var(--theme-accent)}button:hover,button:focus{background-color:var(--theme-accent);color:var(--theme-dark)}button{background-color:var(--theme-dark);border:1px solid var(--theme-accent);padding:.2rem 1rem;font-variant:small-caps;font-size:.9rem}body{font-size:1rem}h1{font-size:2.5rem}button{cursor:pointer}html{font-family:sans-serif,monospace}@media only screen and (max-width: 600px){html{font-size:16px}}@media only screen and (min-width: 600px){html{font-size:18px}}body{background-color:var(--theme-dark);color:var(--theme-light);padding:0;margin:0}*{transform:translateZ(0)}a{color:var(--theme-accent)}a:hover,a:focus{text-decoration:none;background-color:var(--theme-accent);color:var(--theme-dark)}markdown .language-ic-metadata{display:none}code[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}
</style><link rel="stylesheet" href="styles-4SQKIKAV.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-4SQKIKAV.css"></noscript><style ng-app-id="ng">[_nghost-ng-c3775897885]{display:grid;height:100vh;overflow:hidden;box-sizing:border-box;width:auto;position:relative}@media only screen and (max-width: 600px){[_nghost-ng-c3775897885]{background:linear-gradient(to bottom,var(--theme-dark-secondary),var(--theme-dark) 80px 100%);padding:5px 0 0;grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"logo social" "content content" "nav nav"}[_nghost-ng-c3775897885]   [data-ic-logo][_ngcontent-ng-c3775897885]{margin-left:30px}[_nghost-ng-c3775897885]   [data-ic-social-buttons][_ngcontent-ng-c3775897885]{justify-self:flex-end;margin-right:30px}[_nghost-ng-c3775897885]   main[_ngcontent-ng-c3775897885]{border-width:1px 0 0 0;border-style:solid;padding:10px;border-color:var(--theme-tertiary)}}@media only screen and (min-width: 600px){[_nghost-ng-c3775897885]{background:linear-gradient(to right,var(--theme-dark-secondary),var(--theme-dark) 125px 100%);padding:30px 0 30px 5px;grid-template-columns:100px 1fr;grid-template-rows:auto auto 1fr;grid-gap:20px;grid-template-areas:"logo content" "nav  content" "social content"}[_nghost-ng-c3775897885]   [data-ic-social-buttons][_ngcontent-ng-c3775897885]{justify-self:flex-start;align-self:flex-start}[_nghost-ng-c3775897885]   main[_ngcontent-ng-c3775897885]{border-width:0 0 0 1px;border-style:solid;border-color:var(--theme-tertiary)}}[data-ic-logo][_ngcontent-ng-c3775897885]{grid-area:logo}[data-ic-social-buttons][_ngcontent-ng-c3775897885]{grid-area:social;align-self:center}[data-ic-navigation][_ngcontent-ng-c3775897885]{grid-area:nav}main[_ngcontent-ng-c3775897885]{grid-area:content}main[_ngcontent-ng-c3775897885]   section[_ngcontent-ng-c3775897885]{max-width:800px}main[_ngcontent-ng-c3775897885]{overflow:auto;box-sizing:border-box;padding:30px;scrollbar-width:thin;scrollbar-color:var(--theme-light) var(--theme-tertiary)}</style><style ng-app-id="ng">[_nghost-ng-c1712305223]{display:flex}a[_ngcontent-ng-c1712305223]{display:block}a[_ngcontent-ng-c1712305223]:hover, a[_ngcontent-ng-c1712305223]:focus{background-color:transparent}img[_ngcontent-ng-c1712305223]{display:block;width:100%}@media only screen and (max-width: 600px){img[_ngcontent-ng-c1712305223]{max-width:55px}}@media only screen and (min-width: 600px){img[_ngcontent-ng-c1712305223]{max-width:150px}}</style><style ng-app-id="ng">a[_ngcontent-ng-c3947245871]{transition:all .3s;color:var(--theme-accent)}a[_ngcontent-ng-c3947245871]   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-accent);padding:0}a[_ngcontent-ng-c3947245871]:hover, a[_ngcontent-ng-c3947245871]:focus{background-color:var(--theme-accent);color:var(--theme-dark)}a[_ngcontent-ng-c3947245871]:hover   [data-ic-icon][_ngcontent-ng-c3947245871], a[_ngcontent-ng-c3947245871]:focus   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-dark)}a.active[_ngcontent-ng-c3947245871]{background-color:var(--theme-dark-secondary);cursor:unset;color:var(--theme-light)}a.active[_ngcontent-ng-c3947245871]   [data-ic-icon][_ngcontent-ng-c3947245871]{--background-color: var(--theme-light)}[_nghost-ng-c3947245871]{display:flex;align-items:center;justify-content:flex-end;width:100%}@media only screen and (min-width: 600px){[_nghost-ng-c3947245871]{justify-content:space-evenly}}a[_ngcontent-ng-c3947245871]{transition:all .3s;display:flex;border-radius:5px}a[_ngcontent-ng-c3947245871]{margin:10px}[data-ic-icon][_ngcontent-ng-c3947245871]{--font-size: 1.5rem}</style><style ng-app-id="ng">a[_ngcontent-ng-c632272801]{transition:all .3s;color:var(--theme-accent)}a[_ngcontent-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-accent);padding:0}a[_ngcontent-ng-c632272801]:hover, a[_ngcontent-ng-c632272801]:focus{background-color:var(--theme-accent);color:var(--theme-dark)}a[_ngcontent-ng-c632272801]:hover   [data-ic-icon][_ngcontent-ng-c632272801], a[_ngcontent-ng-c632272801]:focus   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-dark)}a.active[_ngcontent-ng-c632272801]{background-color:var(--theme-dark-secondary);cursor:unset;color:var(--theme-light)}a.active[_ngcontent-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--background-color: var(--theme-light)}[_nghost-ng-c632272801]{display:flex}@media only screen and (max-width: 600px){[_nghost-ng-c632272801]{flex-direction:row}[_nghost-ng-c632272801]   a[_ngcontent-ng-c632272801]{text-align:center;flex-grow:1}[_nghost-ng-c632272801]   .title[_ngcontent-ng-c632272801]{display:none}[_nghost-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{--font-size: 1.2rem}}@media only screen and (min-width: 600px){[_nghost-ng-c632272801]{flex-direction:column}[_nghost-ng-c632272801]   a[_ngcontent-ng-c632272801]{text-align:left}[_nghost-ng-c632272801]   [data-ic-icon][_ngcontent-ng-c632272801]{display:none}}a[_ngcontent-ng-c632272801]{background-color:var(--theme-dark);display:block;border:1px solid var(--theme-tertiary);box-sizing:border-box;padding:5px 15px;cursor:pointer;transition:all .3s;font-variant:small-caps;font-size:.9rem;text-decoration:none}</style><style ng-app-id="ng">[_nghost-ng-c1206199484]{--background-color: var(--theme-accent);--font-size: 1rem;display:contents}span[_ngcontent-ng-c1206199484]{background-color:var(--background-color);width:var(--font-size);height:var(--font-size)}a[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}a:hover[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:hover   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:active[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a:active   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}a.active[_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484], a.active   [_nghost-ng-c1206199484]   span[_ngcontent-ng-c1206199484]{background-color:var(--background-color)}</style><style ng-app-id="ng">.details[_ngcontent-ng-c1870341192]{margin-top:20px;font-size:.7rem;scrollbar-width:thin}.details[_ngcontent-ng-c1870341192]   .summary[_ngcontent-ng-c1870341192]{cursor:pointer;font-variant:small-caps}.article-metadata[_ngcontent-ng-c1870341192]{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;flex-wrap:wrap}.article-metadata[_ngcontent-ng-c1870341192] > *[_ngcontent-ng-c1870341192]{padding:10px 0 0}@media only screen and (min-width: 600px){.article-metadata[_ngcontent-ng-c1870341192]{flex-direction:row}}</style><link rel="https://dev.to/bwca/memoize-decorator-5aoo"><style ng-app-id="ng">[_nghost-ng-c85709311]{font-size:smaller}ol[_ngcontent-ng-c85709311]{margin:0}</style></head>
  <body><!--nghm-->
    <div data-ic-root _nghost-ng-c3775897885 class="ng-tns-c3775897885-0" ng-version="18.0.3" ngh="7" ng-server-context="ssg"><header _ngcontent-ng-c3775897885 data-ic-logo class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromTop" _nghost-ng-c1712305223 ngh="0"><a _ngcontent-ng-c1712305223 href="/home"><img _ngcontent-ng-c1712305223 src="./logo.png" alt="logo, depicting a ginger cat in a box"></a></header><nav _ngcontent-ng-c3775897885 data-ic-social-buttons class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromBottom" _nghost-ng-c3947245871 ngh="0"><a _ngcontent-ng-c3947245871 target="_blank" href="https://github.com/Bwca" title="GitHub"><span _ngcontent-ng-c3947245871 data-ic-icon iconname="github" _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/github.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span></a><a _ngcontent-ng-c3947245871 target="_blank" href="https://www.linkedin.com/in/volodymyr-yepishev" title="LinkedIn"><span _ngcontent-ng-c3947245871 data-ic-icon iconname="linkedin" _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/linkedin.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span></a></nav><nav _ngcontent-ng-c3775897885 data-ic-navigation class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromLeft" _nghost-ng-c632272801 ngh="1"><!----><a _ngcontent-ng-c632272801 routerlinkactive="active" title="home" href="/home" class="ng-star-inserted" style><span _ngcontent-ng-c632272801 data-ic-icon _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/home.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span><span _ngcontent-ng-c632272801 class="title">home</span></a><!----><!----><a _ngcontent-ng-c632272801 routerlinkactive="active" title="articles" href="/dev-articles" class="ng-star-inserted" style><span _ngcontent-ng-c632272801 data-ic-icon _nghost-ng-c1206199484 ngh="0"><span _ngcontent-ng-c1206199484 style="mask: url(icons/solid/book.svg) no-repeat center; display: inline-block; mask-size: 100%;"></span></span><span _ngcontent-ng-c632272801 class="title">articles</span></a><!----><!----></nav><main _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0 ng-trigger ng-trigger-slideInFromRight"><section _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0 ng-trigger ng-trigger-routeAnimations"><router-outlet _ngcontent-ng-c3775897885 class="ng-tns-c3775897885-0"></router-outlet><div _nghost-ng-c1870341192 data-ic-article-view class="ng-star-inserted" style ngh="6"><div _ngcontent-ng-c1870341192 data-ic-breadcrumbs _nghost-ng-c1373225446 class="ng-star-inserted" ngh="2"><div _ngcontent-ng-c1373225446><span _ngcontent-ng-c1373225446 class="ng-star-inserted"> / <a _ngcontent-ng-c1373225446 href="/dev-articles">Articles</a> /  Memoize Decorator </span><!----><!----><!----><!----></div></div><!----><section _ngcontent-ng-c1870341192 class="article-metadata"><section _ngcontent-ng-c1870341192 data-ic-accordion class="details ng-tns-c2942593920-1 ng-star-inserted" _nghost-ng-c2942593920 ngh="3"><button _ngcontent-ng-c2942593920 class="ng-tns-c2942593920-1"><span _ngcontent-ng-c1870341192 ngprojectas="summary" class="summary ng-tns-c2942593920-1">article metadata</span></button><br _ngcontent-ng-c2942593920 class="ng-tns-c2942593920-1"><!----></section><section _ngcontent-ng-c1870341192 data-ic-article-series _nghost-ng-c85709311 class="ng-star-inserted" ngh="4"><i _ngcontent-ng-c85709311>The article is a part of the series:</i><ol _ngcontent-ng-c85709311><li _ngcontent-ng-c85709311 class="ng-star-inserted"><a _ngcontent-ng-c85709311 href="/dev-article/decorator-memoization_2022-06-06-part-0-caching-decorator" class="ng-star-inserted">Caching Decorator</a><!----><!----></li><li _ngcontent-ng-c85709311 class="ng-star-inserted"><span _ngcontent-ng-c85709311 class="ng-star-inserted">Memoize Decorator (you are here)</span><!----><!----><!----></li><!----></ol></section><!----></section><section _ngcontent-ng-c1870341192 data-ic-markdown _nghost-ng-c1847889374 ngh="5"><markdown _ngcontent-ng-c1847889374 clipboard ngh="0"><pre><code class="language-ic-metadata">{
  "name": "Memoize Decorator",
  "series": {
    "name": "Decorator Memoization",
    "part": 1
  },
  "date": "2022-07-12",
  "lastModifiedDate": "2022-07-12",
  "author": "Volodymyr Yepishev",
  "tags": ["typescript", "tutorial", "decorators"],
  "canonicalLink": "https://dev.to/bwca/memoize-decorator-5aoo"
}
</code></pre>
<h1>Memoize Decorator</h1>
<p>The caching decorator from the previous article was fine, but there was a problem with it: it was too specific, it assumed only one primitive argument for the decorated method, so it's abilities were limited. It also had no mechanism of clearing the cache, so results would be stored until the application is torn down.</p>
<p>Let's think of a better solution, that would be more flexible. Something that:</p>
<ul>
<li>does not make assumptions about the key used for storing memoized result;</li>
<li>has a mechanism for clearing the cache;</li>
<li>can have debugging capabilities;</li>
<li>can use either Map or Weakmap for storage.</li>
</ul>
<p>Since in <code>js</code> we can pass function as arguments, it allows us to have great flexibility: we can pass a function to extract unique id from arguments, which we later can use as a key to memoize a result, instead of using an argument as a key, which was the case with the previous decorator.</p>
<p>Hence, the payload for our new memoize decorator can be summed up in the following interface:</p>
<pre><code class="language-typescript">// ./models/memoize-payload.model.ts
export interface MemoizePayload {
  // The function that will determine a unique id for the provided arguments set, determined by used
  extractUniqueId: (...args: any[]) =&gt; any;
  // A flag to use WeakMap
  doUseWeakMap?: boolean;
  // If regular map is used, you can set timeout to clear its contents, optional
  clearCacheTimeout?: number;
  // For debug purposes you can pass an exta function for logging all actions
  debugReporter?: (message: string, state?: Map&lt;any, unknown&gt; | WeakMap&lt;object, unknown&gt; | unknown) =&gt; void;
}
</code></pre>
<p>Since now we're passing arguments to the decorator, it will no longer be a mere function, but a factory one, producing a decorator. The decorator function itself can be typed as:</p>
<pre><code class="language-typescript">// ./models/decorator.model.ts
export type MemoizeDecorator = (target: unknown, propertyKey: string, descriptor: PropertyDescriptor) =&gt; void;
</code></pre>
<p>Let's assume two use cases:</p>
<ul>
<li>with timed cache clearing, this version doesn't need the boolean flag <code>doUseWeakMap</code>;</li>
<li>without cache clearing with optional WeakMap, this version does not need <code>clearCacheTimeout</code> argument.</li>
</ul>
<p>Bearing that in mind, using function overload in typescript we can produce two signatures for the factory:</p>
<pre><code class="language-typescript">export function memoize(args: Omit&lt;MemoizePayload, 'doUseWeakMap'&gt;): MemoizeDecorator;
export function memoize(args: Omit&lt;MemoizePayload, 'clearCacheTimeout'&gt;): MemoizeDecorator;
</code></pre>
<p>Now for the implementation of the memoize decorator factory itself, with some debug messages passed to the optional <code>debugReporter</code>:</p>
<pre><code class="language-typescript">// ./memoize.decorator.ts
import { MemoizeDecorator } from './models/decorator.model';
import { MemoizePayload } from './models/memoize-payload.model';

export function memoize(args: Omit&lt;MemoizePayload, 'doUseWeakMap'&gt;): MemoizeDecorator;
export function memoize(args: Omit&lt;MemoizePayload, 'clearCacheTimeout'&gt;): MemoizeDecorator;

export function memoize({ extractUniqueId, clearCacheTimeout, doUseWeakMap, debugReporter }: MemoizePayload): MemoizeDecorator {
  return (target: unknown, propertyKey: string, descriptor: PropertyDescriptor): void =&gt; {
    let cacheTeardownTimer: ReturnType&lt;typeof setTimeout&gt;;

    let cache = initCache(doUseWeakMap);

    const startTeardownTimeout = !clearCacheTimeout
      ? null
      : () =&gt; {
          if (cacheTeardownTimer) {
            debugReporter?.('Clearing the cache timeout timer');
            clearTimeout(cacheTeardownTimer);
          }
          debugReporter?.(`Cache to be cleared in ${clearCacheTimeout}ms`);
          cacheTeardownTimer = setTimeout(() =&gt; {
            debugReporter?.('Clearing the current cache of', cache);
            cache = initCache(doUseWeakMap);
            debugReporter?.('Cache cleared: ', cache);
          }, clearCacheTimeout);
        };

    const originalMethod = descriptor.value;

    descriptor.value = function (...args: unknown[]) {
      startTeardownTimeout?.();

      const uniqueId: any = extractUniqueId(...args);
      debugReporter?.('Looking for a value with unique id of ', uniqueId);

      if (cache.has(uniqueId)) {
        const cachedResult = cache.get(uniqueId);
        debugReporter?.('Returning cached result', cachedResult);
        return cachedResult;
      }

      debugReporter?.('No cached result found');
      const result = originalMethod.apply(this, args);

      debugReporter?.('Storing a new entry in cache: ', { uniqueId, result });
      cache.set(uniqueId, result);
      debugReporter?.('Cache updated', cache);

      return result;
    };
  };
}

function initCache(doUseWeakMap?: boolean) {
  return doUseWeakMap ? new WeakMap&lt;object, unknown&gt;() : new Map&lt;any, unknown&gt;();
}
</code></pre>
<p>Looks good, but better test it. We can use <code>jest</code> for that, create a class with a method that does some calculations, running it several times and checking how much times does it take to run a decorated methods vs non-decorated.</p>
<p>First let's create a helper function to check the time:</p>
<pre><code class="language-typescript">function checkRuntime&lt;T extends (...args: any) =&gt; any, C&gt;(fun: T, iterations: number, countdown: C): number {
  const start = performance.now();
  for (let x = 0; x++ &lt;= iterations; ) {
    fun(countdown);
  }
  const end = performance.now();
  return end - start;
}
</code></pre>
<p>It basically runs a function a number of times and tells how long it took, nothing special.</p>
<p>Since I have poor imagination, I will use a similar countdown class I used in the previous article:</p>
<pre><code class="language-typescript">interface CalculationPayload {
  id: number;
  n: number;
}

class ObjectCountdownCalculator {
  @memoize({
    extractUniqueId: (a) =&gt; a.id,
  })
  public static decoratedCountDownWithMap(a: CalculationPayload): number {
    return ObjectCountdownCalculator.countdown(a);
  }

  @memoize({
    extractUniqueId: (a) =&gt; a,
    doUseWeakMap: true,
  })
  public static decoratedCountdownWithWeakMap(a: CalculationPayload): number {
    return ObjectCountdownCalculator.countdown(a);
  }

  public static nonDecoratedCountDown(a: CalculationPayload): number {
    return ObjectCountdownCalculator.countdown(a);
  }

  private static countdown({ n }: CalculationPayload): number {
    let count = 0;
    while (count &lt; n) {
      count += 1;
    }
    return count;
  }
}
</code></pre>
<p>So what's going on here? There's a private method doing all the work and 3 public ones calling it, two of them are decorated. With 3 public methods invoking the same internal one, we can run them and compare results to see how fast our memoization decorator is compared to regular method call.</p>
<p>Let's assume it's 5 times faster if there are 5 iteration calls:</p>
<pre><code class="language-typescript">it('The decorated version of the countdown with regular map should be at least 5 times faster', () =&gt; {
  // Arrange
  const countdown: CalculationPayload = {
    id: 1,
    n: 500000000,
  };
  const iterations = 5;

  // Act
  const decoratedVersionTime = checkRuntime(ObjectCountdownCalculator.decoratedCountDownWithMap, iterations, countdown);
  const nonDecoratedVersionTime = checkRuntime(ObjectCountdownCalculator.nonDecoratedCountDown, iterations, countdown);

  // Assert
  expect(Math.floor(nonDecoratedVersionTime / decoratedVersionTime)).toBeGreaterThanOrEqual(5);
});
</code></pre>
<p>And it actually is that fast. What's interesting, is that the <code>WeakMap</code> version turned out to be only 4 times faster. I wonder why though.</p>
<p>Anyway, that's about it.</p>
<p>You can find the code as </p>
<ul>
<li><a href="https://www.npmjs.com/package/@merry-solutions/memoize-decorator">an npm package here</a>;</li>
<li><a href="https://github.com/Bwca/package__merry-solutions__memoize-decorator">as source code there</a>;</li>
<li>or <a href="https://www.typescriptlang.org/play?jsx=0#code/JYOwLgpgTgZghgYwgAgLIQLYHtgC8IAKcAngDZZwAmyA3gFDLID0TyAKgBYowCuICYYFhDIwHOGGQB3YKVLJKESFAygUcZH2ABHHimDUYWKKK7IADlCwA3AxGpwoAcx4YI4AM7IPSgDQKlaFUQe2QAI2JNH0oGZAgADzAoRDAAVRAdPQBJSgAuZAAKADoSxycPfLgQYgBtAF0ASmQAXgA+ZCriAG5YlmQAQWQYUjgnUSwolAB1CDgAa1Q4c1jKLFSfGfnF8wB+fLCsLFJZkB7GPqyYZCgIFxGTDCXkYC8eaP9iLB5kBCrvJVEwDcX0kYAmCGOjmeYC8CGEkE8-iw5kEwjgpFiENmUAAwoguGwgRAQXtkCBXGFoGdmKwAGLGAJhHhjcw8KDmLA+Lyfb6-ETmOAeLx-BJgDS8fiokRGEzkJxOUBjdHyFJCEAeFYQJlOABKEA5UGUpIKbiFowg+Q8SUV-itEggpO2AB5Ov4+HMQFgpCB2gAfZCbBZLJ1YMIAKwgAjdIA9Xp9yH97s93qabWQ1hwlB6AF86HQwMRzCh0Ng8BAACKR4wSBnNQpi5xKfJJuP+SzI6AFgDSEGIlutICc-kUHgQUGAKOM+QIViLhuIldH48nUFT7QzBh6dAlAjVyDcpfwBTKFWQAHlVGAnSWcPgiGQKJR-AByVbrCCB7bP1oNfI3suVnCyRglAPQ7lK+6YLeEDHs4p4XsAV7-neJDkFQL5Yo4eIIASRIgt+v5oFBAFVsBxhbuBe4HtBBQ0HEiTJAI6SZBAOT+JhuL4hAhLAjwYDDmsGyzEG5jDlqzJ6gayjINmf7EShD5UIRyEVqRNYmPQjA3GAbIiAUDZOE2mgxsmIBtrOnbED2fbeAOQ4BEuE4gdOFnzouY5OcYhEbtQaaaYwyDHJIvw4dx2KrN6PHQPkeo6VAIBsIWEBOgWRZYFcPhgFFIKtFuAWBQCIVmHWoCIdhXAFG+QlbEsDR5QFcLqpIdqGmw4VxtlfEtMgACEHHldxeF8bE+U7GSPByCNAX5AUa60FN+XAFcBRFWFjgRQlRKrvN+W7YyEn6sYRpFAUz44pC46DqYKCrYCvGgltz51Qtu0cZ1YArVxbXrR1W3PXtjC5gD+26odhrQDsJ0AAYDeM4Q3RdoSgMgAAkND9V9Q1gNmGAeFD-0A6t31QBtUUmHWmXvQUs0tO0-nA4o2qSUdEMnWdF2KtdPxsjc4A-FxyDpc+7FcQTwO3SVGRgANlWCR+wnbGLAOMwdUms6dsMcfY+TC-zoVK-l2bsRdA3vQbMn1YwjVWoL44KiA6LoGIWC+Q5HkrkU1jonoltu8uIGe97KB1pRwiFCURQns2JlxvUTT0wFLVZe1kVY5Ds2+1bwg21ouisXkHTVN1oqMWkGR5zkxSlHB5sq6DatQOnz4ADKHHMnMyh06ZB9IiEcMZLHPNQ6XILrufZJQz0vUthSrUU4geAU4-5w08cvVnTV61wlB6h4E2SHWc+GR9y85ObjB18z4ON2zsW6Zzq3UDce+kGAuuP7v+-n9cSi6Vv9if1ftSQ2eY9qXzBsdU6AA5cEXEn4QBfpIIwfBKBPWAQ1bOkhn7726sYYA9tHZKA4C7SO5hzCkGIPpDgLx-AninmA8S9cWY31OgAZRApzDQIQpBxHAFASIyNVo638HRU+T4f6IJkubOemUl7lwnv4bBr9a6MKvpAs6AseDmEoPaVBIt9aZx-nFEQSiwDoOzNSCxdBczbj4LuMOpVpZcVlu+T8SxSQHCOCcNeWlf7xQUHLNx5hkBjW4QGBWwZQwRijMZWM3pWg03yGE50rpYmmQSc9GxocRChQQHMHUfBBBuCdGweiCJKBeCrpHOClRqhzVSTiBJEp8hsH8IhaAEg1SnnJBgSkUB2JfHABtfIOJCI9L6TtH4mDbKOAPhYaAMpHj8AgEUZMGdYidwKEFZA8RuoAAYug7IANRHOQE6EqyhOnZy6D4gKEoVqDLABtAmQMpmb3cK7OciyqhIFWV6dZvjjG8OoAAWhmYaHMeZQDKHgEgZAeJSAIAmlckA940LUH8gYJJFIqSxBANi3puKbEQkFF4M84ZIzS0eRtBFSKRggUmQAAWomWWiU0S4pGYhXAux56lFAML4WI2YGixFZGEUgwAEAzMEFKxQQFdE4keeWOMUw+7bGPCM9EdKUVosfGMnFGkpraT-uS6JVLCk0q1cigOcILVxl5ZY0ByBmXyRggnDlTF5H5xmnAepgr8pVXljVcw+Qkh6H9VI0VPBxWSulbGuV1ZICUEVXa70qqxBBI1fCq19K1S6qUgSiZCdjX+NNZSlNQy4y0utcYIotrK3egdUKp1YqJVSrtDKskwhAKJvsBWsAyrG1wE1Yi61ebUJ6sLdASZgKTUUoEP2y1o76W1vrU8+1vrHWivHF7SAcapVro2rRMkMkR3aqlPmyeU7DX5W2Wu-Z6CpDUOOLPR5ZyyS3Pyveo5dYACM5ijV+JyY8x1xLpmHrjGesdwhL3dUxQXX9Eb8XIAAKx7PQxh9DgqrHW0kO04CXTuooa3LhgI8qk0ADVoAeDVFFbquT8mFKJAUMtC7qVVpzepIoCbgJ9qVSqtVSw2mXKlB4AZqaQDPVI56EAPbeOUCo1AGjwg6OHy4Hkgp4BmOsfNQ2kA1aV1QD+bJtSSb+2DrMtCDponxN6antbLxRQ5QFChjx3RinlObTcPkNGbnKPUdo0SbM+MegOeOE5rATgXMybk+5gLKmiQ+ZoDF0z9gPOBbcMFuqQA">in the playground</a>.</li>
</ul>
</markdown><!----></section></div><!----></section></main></div>
  <link rel="modulepreload" href="chunk-76TOWMZK.js"><script src="polyfills-UD7OJCHV.js" type="module"></script><script src="scripts-MI2AUGIN.js" defer></script><script src="main-66OU5UQS.js" type="module"></script>

<script id="ng-state" type="application/json">{"341425767":{"b":[{"metadata":{"name":"Create a Custom eslint Rule with Typescript","series":null,"date":"2021-04-02","lastModifiedDate":"2021-07-11","author":"Volodymyr Yepishev","tags":["typescript","tutorial","eslint","npm"],"canonicalLink":"https://dev.to/bwca/create-a-custom-eslint-rule-with-typescript-4j3d"},"path":"2021-04-02-create-a-custom-eslint-rule-with-typescript.md"},{"metadata":{"name":"Create Object Property String Path Generator with Typescript","series":null,"date":"2021-04-13","lastModifiedDate":"2021-04-13","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","react"],"canonicalLink":"https://dev.to/bwca/create-object-property-string-path-generator-with-typescript-13e3"},"path":"2021-04-13-create-object-property-string-path-generator-with-typescript/2021-04-13-create-object-property-string-path-generator-with-typescript.md"},{"metadata":{"name":"Build Entity-Friendly react-router Paths Generator with Typescript","series":null,"date":"2021-05-12","lastModifiedDate":"2021-05-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/build-entity-friendly-react-router-paths-generator-with-typescript-fpd"},"path":"2021-05-12-build-entity-friendly-react-router-path-generator-with-typescript.md"},{"metadata":{"name":"Split Collection Based on Enum Value with Typescript","series":null,"date":"2021-06-28","lastModifiedDate":"2021-06-28","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/split-collection-based-on-enum-value-with-typescript-4g3b"},"path":"2021-06-28-split-collection-based-on-enum-values/2021-06-28-split-collection-based-on-enum-values.md"},{"metadata":{"name":"Make Your Own Linkedin Promoted Posts Blocker","series":null,"date":"2021-07-14","lastModifiedDate":"2021-07-14","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/make-your-own-linkedin-promoted-posts-blocker-fj5"},"path":"2021-07-14-make-you-own-linkedin-promoted-posts-blocker.md"},{"metadata":{"name":"How I Decided to Write React cli and How it Went","series":null,"date":"2021-08-08","lastModifiedDate":"2021-08-08","author":"Volodymyr Yepishev","tags":["angular"],"canonicalLink":"https://dev.to/bwca/how-i-decided-to-write-react-cli-and-how-it-went-4f19"},"path":"2021-08-08-how-i-decided-to-write-react-cli-and-how-it-went/2021-08-08-how-i-decided-to-write-react-cli-and-how-it-went.md"},{"metadata":{"name":"Remove Double Imports with Regular Expression","series":null,"date":"2022-03-29","lastModifiedDate":"2022-03-29","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/remove-double-imports-with-regular-expression-47af"},"path":"2022-03-29-remove-double-imports-with-regular-expression.md"},{"metadata":{"name":"Decorating React Hook with Typescript","series":null,"date":"2022-04-12","lastModifiedDate":"2022-04-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/decorating-react-hook-with-typescript-bd9"},"path":"2022-04-12-decorating-react-hook-with-typescript.md"},{"metadata":{"name":"Override Method Return with a Decorator","series":null,"date":"2022-04-22","lastModifiedDate":"2022-04-22","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/override-method-return-with-a-decorator-1bii"},"path":"2022-04-22-change-api-response-with-a-decorator.md"},{"metadata":{"name":"Turn Angular Application into Chrome Extension","series":null,"date":"2022-05-25","lastModifiedDate":"2022-05-25","author":"Volodymyr Yepishev","tags":["angular","tutorial","chrome","extension"],"canonicalLink":"https://dev.to/bwca/turn-angular-application-into-chrome-extension-2mkn"},"path":"2022-05-25-turn-angular-application-into-chrome-extension.md"},{"metadata":{"name":"Typed Dates Conversion with Typescript","series":null,"date":"2022-06-30","lastModifiedDate":"2022-06-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","generics","conversion","date","moment"],"canonicalLink":"https://dev.to/bwca/typed-dates-conversion-with-typescript-49n7"},"path":"2022-06-30-typed-date-conversion-with-typescript.md"},{"metadata":{"name":"Weekday - Date - Month type","series":null,"date":"2022-07-29","lastModifiedDate":"2022-07-29","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/weekday-date-month-type-26j4"},"path":"2022-07-29-week-day-date-month-type.md"},{"metadata":{"name":"An Alternative Way of Creating Enumerations in Typescript","series":null,"date":"2022-08-03","lastModifiedDate":"2022-08-03","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/an-alternative-way-of-creating-enumerations-in-typescript-579k"},"path":"2022-08-03-an-alternative-way-of-creating-enumerations-in-typescript.md"},{"metadata":{"name":"Create a Static Class in Typescript","series":null,"date":"2022-08-12","lastModifiedDate":"2022-08-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/create-a-static-class-in-typescript-5ao1"},"path":"2022-08-12-create-static-class-in-typescript.md"},{"metadata":{"name":"Typescript Class Mixins","series":null,"date":"2022-08-20","lastModifiedDate":"2022-08-20","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/typescript-class-mixins-3hib"},"path":"2022-08-20-typescript-class-mixins.md"},{"metadata":{"name":"Using Classes Inside React's Functional Components","series":null,"date":"2022-08-22","lastModifiedDate":"2022-08-22","author":"Volodymyr Yepishev","tags":["typescript","react","tutorial"],"canonicalLink":"https://dev.to/bwca/using-classes-inside-reacts-functional-components-oj3"},"path":"2022-08-22-using-classes-inside-react-functional-component.md"},{"metadata":{"name":"Debouncing Component Methods in Angular","series":null,"date":"2022-08-29","lastModifiedDate":"2022-08-29","author":"Volodymyr Yepishev","tags":["typescript","angular","tutorial"],"canonicalLink":"https://dev.to/bwca/debouncing-component-methods-in-angular-34im"},"path":"2022-08-29-debouncing-component-methods-in-angular.md"},{"metadata":{"name":"A Trick to Further Breaking Down Angular Components","series":null,"date":"2022-09-02","lastModifiedDate":"2022-09-02","author":"Volodymyr Yepishev","tags":["typescript","angular"],"canonicalLink":"https://dev.to/bwca/a-trick-to-further-breaking-down-angular-components-1i8a"},"path":"2022-09-02-a-trick-to-further-breaking-angular-components.md"},{"metadata":{"name":"Typed Enum Flipping in Typescript","series":null,"date":"2022-11-09","lastModifiedDate":"2022-11-09","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/typed-enum-flipping-in-typescript-2ce9"},"path":"2022-11-09-typed-enum-flipping-in-typescript.md"},{"metadata":{"name":"Typed Filtering with Generics in Typescript","series":null,"date":"2022-12-01","lastModifiedDate":"2022-12-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","generics"],"canonicalLink":"https://dev.to/bwca/typed-filtering-with-generics-in-typescript-204f"},"path":"2022-12-01-typed-filtering-with-generics.md"},{"metadata":{"name":"Template Driving Reactive Form Validation in Angular","series":null,"date":"2023-05-15","lastModifiedDate":"2023-05-15","author":"Volodymyr Yepishev","tags":["angular"],"canonicalLink":"https://dev.to/bwca/template-driving-reactive-form-validation-in-angular-302e"},"path":"2023-05-15-template-driving-reactive-form-validation/2023-05-15-template-driving-reactive-form-validation-in-angular.md"},{"metadata":{"name":"Detect Invalid FormGroup Tree in Angular","series":null,"date":"2023-05-17","lastModifiedDate":"2023-05-17","author":"Volodymyr Yepishev","tags":["angular","debugger"],"canonicalLink":"https://dev.to/bwca/detect-invalid-formgroup-tree-in-angular-1ed"},"path":"2023-05-17-detect-invalid-form-group-tree-in-angular/2023-05-17-detect-invalid-form-group-tree-in-angular.md"},{"metadata":{"name":"Safe Route Param Injection in Angular with a Decorator","series":null,"date":"2023-07-22","lastModifiedDate":"2023-07-28","author":"Volodymyr Yepishev","tags":["angular","tutorial","routing","generics"],"canonicalLink":"https://dev.to/bwca/safe-route-param-injection-in-angular-with-a-decorator-1lk7"},"path":"2023-07-22-safe-route-param-injection-in-angular-with-a-decorator.md"},{"metadata":{"name":"Deep Readonly Generic in Typescript","series":null,"date":"2023-09-16","lastModifiedDate":"2024-06-26","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/deep-readonly-generic-in-typescript-4b04"},"path":"2023-09-16-deep-readonly-generic-in-typescript.md"},{"metadata":{"name":"Typing Object Keys With Enum Values Using Typescript","series":null,"date":"2023-11-01","lastModifiedDate":"2023-11-01","author":"Volodymyr Yepishev","tags":["typescript","generics","tutorial"],"canonicalLink":"https://dev.to/bwca/typing-object-keys-with-enum-values-using-typescript-4k23"},"path":"2023-11-01-typing-object-keys-with-enum-values-using-typescript.md"},{"metadata":{"name":"How to Create Bookmarklets Using External Libraries like React","series":null,"date":"2024-03-13","lastModifiedDate":"2024-03-13","author":"Volodymyr Yepishev","tags":["javascript","tutorial"],"canonicalLink":"https://dev.to/bwca/how-to-create-bookmarklets-using-libraries-like-react-2bhc"},"path":"2024-03-13-how-to-create-bookmarklets-using-external-libraries-like-react/2024-03-13-how-to-create-bookmarklets-using-external-libraries-like-react.md"},{"metadata":{"name":"Annoying Cat Extension","series":null,"date":"2024-03-29","lastModifiedDate":"2024-03-29","author":"Volodymyr Yepishev","tags":["javascript","tutorial"],"canonicalLink":"https://dev.to/bwca/annoying-cat-extension-4eaf"},"path":"2024-03-29-writing-annoying-image-browser-extension/2024-03-29-writing-annoying-image-browser-extension.md"},{"metadata":{"name":"Improving Dynamic Component Loader Typings in Angular Using Inputs","series":null,"date":"2024-04-15","lastModifiedDate":"2024-04-15","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","generics"],"canonicalLink":"https://dev.to/bwca/improving-dynamic-component-loader-typings-in-angular-using-inputs-obl"},"path":"2024-04-15-improving-dynamic-component-loader-typings-in-angular-using-inputs/2024-04-15-improving-dynamic-component-loader-typings-in-angular-using-inputs.md"},{"metadata":{"name":"Reducing the Boilerplate for Services Utilizing Subjects in Angular","series":null,"date":"2024-05-06","lastModifiedDate":"2024-05-06","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular","rxjs"],"canonicalLink":"https://dev.to/bwca/reducing-the-boilerplate-for-services-utilizing-subjects-in-angular-44fp"},"path":"2024-05-06-reducing-the-boilerplate-for-stateful-services-in-angular/2024-05-06-reducing-the-boilerplate-for-stateful-services-in-angular.md"},{"metadata":{"name":"Crafting a Global State Hook in React","series":null,"date":"2024-05-18","lastModifiedDate":"2024-05-18","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react","state"],"canonicalLink":"https://dev.to/bwca/crafting-a-global-state-hook-in-react-4hb4"},"path":"2024-05-18-crafting-a-global-state-hook-in-react/2024-05-18-crafting-a-global-state-hook-in-react.md"},{"metadata":{"name":"Abstracting State Management in React with Typescript, and its Benefits","series":null,"date":"2024-06-03","lastModifiedDate":"2024-06-03","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular"],"canonicalLink":"https://dev.to/bwca/abstracting-state-management-in-react-with-typescript-and-its-benefits-8mk"},"path":"2024-06-03-abstracting-state-management-in-react-and-its-benefits/2024-06-03-abstracting-state-management-in-react-and-its-benefits.md"},{"metadata":{"name":"Runtime Environment Config in Angular, but without Dependency Injection","series":null,"date":"2024-06-08","lastModifiedDate":"2024-06-08","author":"Volodymyr Yepishev","tags":["typescript","tutorial","angular"],"canonicalLink":"https://dev.to/bwca/runtime-environment-config-in-angular-but-without-dependency-injection-kno"},"path":"2024-06-08-runtime-environment-config-in-angular-but-without-dependency-injection/2024-06-08-runtime-environment-config-in-angular-but-without-dependency-injection.md"},{"metadata":{"name":"Create a Debounce Function from Scratch in Typescript","series":{"name":"Implementing Debounce with Typescript","part":0},"date":"2021-08-26","lastModifiedDate":"2022-04-07","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/create-a-debounce-function-from-scratch-in-typescript-560m"},"path":"create-a-debounce-function-from-scratch-in-typescript/2021-08-26-part-0-create-a-debounce-function-from-scratch-in-typescript.md"},{"metadata":{"name":"Polish Types for the New Debounce Function","series":{"name":"Implementing Debounce with Typescript","part":1},"date":"2022-04-06","lastModifiedDate":"2022-04-06","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/polish-types-for-the-new-debounce-function-5e0n"},"path":"create-a-debounce-function-from-scratch-in-typescript/2022-04-06-part-1-polish-types-for-the-new-debounce-function.md"},{"metadata":{"name":"Caching Decorator","series":{"name":"Decorator Memoization","part":0},"date":"2022-06-06","lastModifiedDate":"2024-06-26","author":"Volodymyr Yepishev","tags":["typescript","tutorial","decorators"],"canonicalLink":"https://dev.to/bwca/caching-decorator-52e1"},"path":"decorator-memoization/2022-06-06-part-0-caching-decorator.md"},{"metadata":{"name":"Memoize Decorator","series":{"name":"Decorator Memoization","part":1},"date":"2022-07-12","lastModifiedDate":"2022-07-12","author":"Volodymyr Yepishev","tags":["typescript","tutorial","decorators"],"canonicalLink":"https://dev.to/bwca/memoize-decorator-5aoo"},"path":"decorator-memoization/2022-07-12-part-1-memoize-decorator.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 0: Intro","series":{"name":"Implementing React Check Permissions","part":0},"date":"2021-10-29","lastModifiedDate":"2021-10-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-reach-check-permissions-part-0-intro-1inc"},"path":"impementing-react-check-permission/2021-10-29-part-0-intro.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 1: Check Permissions Function","series":{"name":"Implementing React Check Permissions","part":1},"date":"2021-10-30","lastModifiedDate":"2021-10-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-reach-check-permissions-part-1-check-permissions-function-136l"},"path":"impementing-react-check-permission/2021-10-30-part-1-check-permissions-function.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 2: Check Permissions Hook","series":{"name":"Implementing React Check Permissions","part":2},"date":"2021-11-01","lastModifiedDate":"2021-11-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-react-check-permissions-the-hook-3m20"},"path":"impementing-react-check-permission/2021-11-01-part-2-use-check-permissions.md"},{"metadata":{"name":"Implementing React Check Permissions. Part 3: with Permissions Component","series":{"name":"Implementing React Check Permissions","part":3},"date":"2021-11-04","lastModifiedDate":"2021-11-04","author":"Volodymyr Yepishev","tags":["typescript","tutorial","react"],"canonicalLink":"https://dev.to/bwca/implementing-react-check-permissions-the-component-3gjm"},"path":"impementing-react-check-permission/2021-11-04-part-3-with-permissions-component.md"},{"metadata":{"name":"Iframe Microfrontends: Intro and Setup","series":{"name":"Iframe Microfrontends","part":0},"date":"2022-05-30","lastModifiedDate":"2022-05-30","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-intro-and-setup-1g7h"},"path":"implement-iframe-microfrontend/2022-05-30-part-0-intro-and-setup.md"},{"metadata":{"name":"Iframe Microfrontends: Standalone React Application","series":{"name":"Iframe Microfrontends","part":1},"date":"2022-05-31","lastModifiedDate":"2022-05-31","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-standalone-react-application-341f"},"path":"implement-iframe-microfrontend/2022-05-31-part-1-standalone-react-application.md"},{"metadata":{"name":"Iframe Microfrontends: Angular Shell","series":{"name":"Iframe Microfrontends","part":2},"date":"2022-05-31","lastModifiedDate":"2022-05-31","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-angular-shell-pmj"},"path":"implement-iframe-microfrontend/2022-05-31-part-2-angular-shell-application.md"},{"metadata":{"name":"Iframe Microfrontends: Make React App Proper Iframe","series":{"name":"Iframe Microfrontends","part":3},"date":"2022-06-01","lastModifiedDate":"2022-06-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","microfrontends","react","angular"],"canonicalLink":"https://dev.to/bwca/iframe-microfrontends-make-react-app-proper-iframe-12g9"},"path":"implement-iframe-microfrontend/2022-06-01-part-3-make-react-app-proper-iframe.md"},{"metadata":{"name":"Create Singleton with ES2022","series":{"name":"Singleton","part":1},"date":"2022-06-25","lastModifiedDate":"2022-07-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial","javascript"],"canonicalLink":"https://dev.to/bwca/create-singleton-with-es2022-51ic"},"path":"singleton/2022-06-25-part-1-create-singleton-with-es2022.md"},{"metadata":{"name":"Singleton Decorator","series":{"name":"Singleton","part":0},"date":"2022-07-01","lastModifiedDate":"2022-07-01","author":"Volodymyr Yepishev","tags":["typescript","tutorial"],"canonicalLink":"https://dev.to/bwca/singleton-decorator-526h"},"path":"singleton/2022-07-01-part-0-singleton-decorator.md"}],"h":{},"s":200,"st":"OK","u":"./articles/index.json","rt":"json"},"1455587773":{"b":"```ic-metadata\r\n{\r\n  \"name\": \"Memoize Decorator\",\r\n  \"series\": {\r\n    \"name\": \"Decorator Memoization\",\r\n    \"part\": 1\r\n  },\r\n  \"date\": \"2022-07-12\",\r\n  \"lastModifiedDate\": \"2022-07-12\",\r\n  \"author\": \"Volodymyr Yepishev\",\r\n  \"tags\": [\"typescript\", \"tutorial\", \"decorators\"],\r\n  \"canonicalLink\": \"https://dev.to/bwca/memoize-decorator-5aoo\"\r\n}\r\n```\r\n\r\n# Memoize Decorator\r\n\r\nThe caching decorator from the previous article was fine, but there was a problem with it: it was too specific, it assumed only one primitive argument for the decorated method, so it's abilities were limited. It also had no mechanism of clearing the cache, so results would be stored until the application is torn down.\r\n\r\nLet's think of a better solution, that would be more flexible. Something that:\r\n* does not make assumptions about the key used for storing memoized result;\r\n* has a mechanism for clearing the cache;\r\n* can have debugging capabilities;\r\n* can use either Map or Weakmap for storage.\r\n\r\nSince in `js` we can pass function as arguments, it allows us to have great flexibility: we can pass a function to extract unique id from arguments, which we later can use as a key to memoize a result, instead of using an argument as a key, which was the case with the previous decorator.\r\n\r\nHence, the payload for our new memoize decorator can be summed up in the following interface:\r\n\r\n```typescript\r\n// ./models/memoize-payload.model.ts\r\nexport interface MemoizePayload {\r\n  // The function that will determine a unique id for the provided arguments set, determined by used\r\n  extractUniqueId: (...args: any[]) => any;\r\n  // A flag to use WeakMap\r\n  doUseWeakMap?: boolean;\r\n  // If regular map is used, you can set timeout to clear its contents, optional\r\n  clearCacheTimeout?: number;\r\n  // For debug purposes you can pass an exta function for logging all actions\r\n  debugReporter?: (message: string, state?: Map\u003Cany, unknown> | WeakMap\u003Cobject, unknown> | unknown) => void;\r\n}\r\n```\r\n\r\nSince now we're passing arguments to the decorator, it will no longer be a mere function, but a factory one, producing a decorator. The decorator function itself can be typed as:\r\n```typescript\r\n// ./models/decorator.model.ts\r\nexport type MemoizeDecorator = (target: unknown, propertyKey: string, descriptor: PropertyDescriptor) => void;\r\n```\r\n\r\nLet's assume two use cases:\r\n* with timed cache clearing, this version doesn't need the boolean flag `doUseWeakMap`;\r\n* without cache clearing with optional WeakMap, this version does not need `clearCacheTimeout` argument.\r\n\r\nBearing that in mind, using function overload in typescript we can produce two signatures for the factory:\r\n\r\n```typescript\r\nexport function memoize(args: Omit\u003CMemoizePayload, 'doUseWeakMap'>): MemoizeDecorator;\r\nexport function memoize(args: Omit\u003CMemoizePayload, 'clearCacheTimeout'>): MemoizeDecorator;\r\n```\r\n\r\nNow for the implementation of the memoize decorator factory itself, with some debug messages passed to the optional `debugReporter`:\r\n\r\n```typescript\r\n// ./memoize.decorator.ts\r\nimport { MemoizeDecorator } from './models/decorator.model';\r\nimport { MemoizePayload } from './models/memoize-payload.model';\r\n\r\nexport function memoize(args: Omit\u003CMemoizePayload, 'doUseWeakMap'>): MemoizeDecorator;\r\nexport function memoize(args: Omit\u003CMemoizePayload, 'clearCacheTimeout'>): MemoizeDecorator;\r\n\r\nexport function memoize({ extractUniqueId, clearCacheTimeout, doUseWeakMap, debugReporter }: MemoizePayload): MemoizeDecorator {\r\n  return (target: unknown, propertyKey: string, descriptor: PropertyDescriptor): void => {\r\n    let cacheTeardownTimer: ReturnType\u003Ctypeof setTimeout>;\r\n\r\n    let cache = initCache(doUseWeakMap);\r\n\r\n    const startTeardownTimeout = !clearCacheTimeout\r\n      ? null\r\n      : () => {\r\n          if (cacheTeardownTimer) {\r\n            debugReporter?.('Clearing the cache timeout timer');\r\n            clearTimeout(cacheTeardownTimer);\r\n          }\r\n          debugReporter?.(`Cache to be cleared in ${clearCacheTimeout}ms`);\r\n          cacheTeardownTimer = setTimeout(() => {\r\n            debugReporter?.('Clearing the current cache of', cache);\r\n            cache = initCache(doUseWeakMap);\r\n            debugReporter?.('Cache cleared: ', cache);\r\n          }, clearCacheTimeout);\r\n        };\r\n\r\n    const originalMethod = descriptor.value;\r\n\r\n    descriptor.value = function (...args: unknown[]) {\r\n      startTeardownTimeout?.();\r\n\r\n      const uniqueId: any = extractUniqueId(...args);\r\n      debugReporter?.('Looking for a value with unique id of ', uniqueId);\r\n\r\n      if (cache.has(uniqueId)) {\r\n        const cachedResult = cache.get(uniqueId);\r\n        debugReporter?.('Returning cached result', cachedResult);\r\n        return cachedResult;\r\n      }\r\n\r\n      debugReporter?.('No cached result found');\r\n      const result = originalMethod.apply(this, args);\r\n\r\n      debugReporter?.('Storing a new entry in cache: ', { uniqueId, result });\r\n      cache.set(uniqueId, result);\r\n      debugReporter?.('Cache updated', cache);\r\n\r\n      return result;\r\n    };\r\n  };\r\n}\r\n\r\nfunction initCache(doUseWeakMap?: boolean) {\r\n  return doUseWeakMap ? new WeakMap\u003Cobject, unknown>() : new Map\u003Cany, unknown>();\r\n}\r\n```\r\n\r\nLooks good, but better test it. We can use `jest` for that, create a class with a method that does some calculations, running it several times and checking how much times does it take to run a decorated methods vs non-decorated.\r\n\r\nFirst let's create a helper function to check the time:\r\n\r\n```typescript\r\nfunction checkRuntime\u003CT extends (...args: any) => any, C>(fun: T, iterations: number, countdown: C): number {\r\n  const start = performance.now();\r\n  for (let x = 0; x++ \u003C= iterations; ) {\r\n    fun(countdown);\r\n  }\r\n  const end = performance.now();\r\n  return end - start;\r\n}\r\n```\r\n\r\nIt basically runs a function a number of times and tells how long it took, nothing special.\r\n\r\nSince I have poor imagination, I will use a similar countdown class I used in the previous article:\r\n\r\n```typescript\r\ninterface CalculationPayload {\r\n  id: number;\r\n  n: number;\r\n}\r\n\r\nclass ObjectCountdownCalculator {\r\n  @memoize({\r\n    extractUniqueId: (a) => a.id,\r\n  })\r\n  public static decoratedCountDownWithMap(a: CalculationPayload): number {\r\n    return ObjectCountdownCalculator.countdown(a);\r\n  }\r\n\r\n  @memoize({\r\n    extractUniqueId: (a) => a,\r\n    doUseWeakMap: true,\r\n  })\r\n  public static decoratedCountdownWithWeakMap(a: CalculationPayload): number {\r\n    return ObjectCountdownCalculator.countdown(a);\r\n  }\r\n\r\n  public static nonDecoratedCountDown(a: CalculationPayload): number {\r\n    return ObjectCountdownCalculator.countdown(a);\r\n  }\r\n\r\n  private static countdown({ n }: CalculationPayload): number {\r\n    let count = 0;\r\n    while (count \u003C n) {\r\n      count += 1;\r\n    }\r\n    return count;\r\n  }\r\n}\r\n```\r\n\r\nSo what's going on here? There's a private method doing all the work and 3 public ones calling it, two of them are decorated. With 3 public methods invoking the same internal one, we can run them and compare results to see how fast our memoization decorator is compared to regular method call.\r\n\r\nLet's assume it's 5 times faster if there are 5 iteration calls:\r\n```typescript\r\nit('The decorated version of the countdown with regular map should be at least 5 times faster', () => {\r\n  // Arrange\r\n  const countdown: CalculationPayload = {\r\n    id: 1,\r\n    n: 500000000,\r\n  };\r\n  const iterations = 5;\r\n\r\n  // Act\r\n  const decoratedVersionTime = checkRuntime(ObjectCountdownCalculator.decoratedCountDownWithMap, iterations, countdown);\r\n  const nonDecoratedVersionTime = checkRuntime(ObjectCountdownCalculator.nonDecoratedCountDown, iterations, countdown);\r\n\r\n  // Assert\r\n  expect(Math.floor(nonDecoratedVersionTime / decoratedVersionTime)).toBeGreaterThanOrEqual(5);\r\n});\r\n```\r\n\r\nAnd it actually is that fast. What's interesting, is that the `WeakMap` version turned out to be only 4 times faster. I wonder why though.\r\n\r\nAnyway, that's about it.\r\n\r\nYou can find the code as \r\n* [an npm package here](https://www.npmjs.com/package/@merry-solutions/memoize-decorator);\r\n* [as source code there](https://github.com/Bwca/package__merry-solutions__memoize-decorator);\r\n* or [in the playground](https://www.typescriptlang.org/play?jsx=0#code/JYOwLgpgTgZghgYwgAgLIQLYHtgC8IAKcAngDZZwAmyA3gFDLID0TyAKgBYowCuICYYFhDIwHOGGQB3YKVLJKESFAygUcZH2ABHHimDUYWKKK7IADlCwA3AxGpwoAcx4YI4AM7IPSgDQKlaFUQe2QAI2JNH0oGZAgADzAoRDAAVRAdPQBJSgAuZAAKADoSxycPfLgQYgBtAF0ASmQAXgA+ZCriAG5YlmQAQWQYUjgnUSwolAB1CDgAa1Q4c1jKLFSfGfnF8wB+fLCsLFJZkB7GPqyYZCgIFxGTDCXkYC8eaP9iLB5kBCrvJVEwDcX0kYAmCGOjmeYC8CGEkE8-iw5kEwjgpFiENmUAAwoguGwgRAQXtkCBXGFoGdmKwAGLGAJhHhjcw8KDmLA+Lyfb6-ETmOAeLx-BJgDS8fiokRGEzkJxOUBjdHyFJCEAeFYQJlOABKEA5UGUpIKbiFowg+Q8SUV-itEggpO2AB5Ov4+HMQFgpCB2gAfZCbBZLJ1YMIAKwgAjdIA9Xp9yH97s93qabWQ1hwlB6AF86HQwMRzCh0Ng8BAACKR4wSBnNQpi5xKfJJuP+SzI6AFgDSEGIlutICc-kUHgQUGAKOM+QIViLhuIldH48nUFT7QzBh6dAlAjVyDcpfwBTKFWQAHlVGAnSWcPgiGQKJR-AByVbrCCB7bP1oNfI3suVnCyRglAPQ7lK+6YLeEDHs4p4XsAV7-neJDkFQL5Yo4eIIASRIgt+v5oFBAFVsBxhbuBe4HtBBQ0HEiTJAI6SZBAOT+JhuL4hAhLAjwYDDmsGyzEG5jDlqzJ6gayjINmf7EShD5UIRyEVqRNYmPQjA3GAbIiAUDZOE2mgxsmIBtrOnbED2fbeAOQ4BEuE4gdOFnzouY5OcYhEbtQaaaYwyDHJIvw4dx2KrN6PHQPkeo6VAIBsIWEBOgWRZYFcPhgFFIKtFuAWBQCIVmHWoCIdhXAFG+QlbEsDR5QFcLqpIdqGmw4VxtlfEtMgACEHHldxeF8bE+U7GSPByCNAX5AUa60FN+XAFcBRFWFjgRQlRKrvN+W7YyEn6sYRpFAUz44pC46DqYKCrYCvGgltz51Qtu0cZ1YArVxbXrR1W3PXtjC5gD+26odhrQDsJ0AAYDeM4Q3RdoSgMgAAkND9V9Q1gNmGAeFD-0A6t31QBtUUmHWmXvQUs0tO0-nA4o2qSUdEMnWdF2KtdPxsjc4A-FxyDpc+7FcQTwO3SVGRgANlWCR+wnbGLAOMwdUms6dsMcfY+TC-zoVK-l2bsRdA3vQbMn1YwjVWoL44KiA6LoGIWC+Q5HkrkU1jonoltu8uIGe97KB1pRwiFCURQns2JlxvUTT0wFLVZe1kVY5Ds2+1bwg21ouisXkHTVN1oqMWkGR5zkxSlHB5sq6DatQOnz4ADKHHMnMyh06ZB9IiEcMZLHPNQ6XILrufZJQz0vUthSrUU4geAU4-5w08cvVnTV61wlB6h4E2SHWc+GR9y85ObjB18z4ON2zsW6Zzq3UDce+kGAuuP7v+-n9cSi6Vv9if1ftSQ2eY9qXzBsdU6AA5cEXEn4QBfpIIwfBKBPWAQ1bOkhn7726sYYA9tHZKA4C7SO5hzCkGIPpDgLx-AninmA8S9cWY31OgAZRApzDQIQpBxHAFASIyNVo638HRU+T4f6IJkubOemUl7lwnv4bBr9a6MKvpAs6AseDmEoPaVBIt9aZx-nFEQSiwDoOzNSCxdBczbj4LuMOpVpZcVlu+T8SxSQHCOCcNeWlf7xQUHLNx5hkBjW4QGBWwZQwRijMZWM3pWg03yGE50rpYmmQSc9GxocRChQQHMHUfBBBuCdGweiCJKBeCrpHOClRqhzVSTiBJEp8hsH8IhaAEg1SnnJBgSkUB2JfHABtfIOJCI9L6TtH4mDbKOAPhYaAMpHj8AgEUZMGdYidwKEFZA8RuoAAYug7IANRHOQE6EqyhOnZy6D4gKEoVqDLABtAmQMpmb3cK7OciyqhIFWV6dZvjjG8OoAAWhmYaHMeZQDKHgEgZAeJSAIAmlckA940LUH8gYJJFIqSxBANi3puKbEQkFF4M84ZIzS0eRtBFSKRggUmQAAWomWWiU0S4pGYhXAux56lFAML4WI2YGixFZGEUgwAEAzMEFKxQQFdE4keeWOMUw+7bGPCM9EdKUVosfGMnFGkpraT-uS6JVLCk0q1cigOcILVxl5ZY0ByBmXyRggnDlTF5H5xmnAepgr8pVXljVcw+Qkh6H9VI0VPBxWSulbGuV1ZICUEVXa70qqxBBI1fCq19K1S6qUgSiZCdjX+NNZSlNQy4y0utcYIotrK3egdUKp1YqJVSrtDKskwhAKJvsBWsAyrG1wE1Yi61ebUJ6sLdASZgKTUUoEP2y1o76W1vrU8+1vrHWivHF7SAcapVro2rRMkMkR3aqlPmyeU7DX5W2Wu-Z6CpDUOOLPR5ZyyS3Pyveo5dYACM5ijV+JyY8x1xLpmHrjGesdwhL3dUxQXX9Eb8XIAAKx7PQxh9DgqrHW0kO04CXTuooa3LhgI8qk0ADVoAeDVFFbquT8mFKJAUMtC7qVVpzepIoCbgJ9qVSqtVSw2mXKlB4AZqaQDPVI56EAPbeOUCo1AGjwg6OHy4Hkgp4BmOsfNQ2kA1aV1QD+bJtSSb+2DrMtCDponxN6antbLxRQ5QFChjx3RinlObTcPkNGbnKPUdo0SbM+MegOeOE5rATgXMybk+5gLKmiQ+ZoDF0z9gPOBbcMFuqQA).","h":{},"s":200,"st":"OK","u":"./articles/decorator-memoization/2022-07-12-part-1-memoize-decorator.md","rt":"text"},"__nghData__":[{},{"t":{"1":"t0"},"c":{"1":[{"i":"t0","r":3,"t":{"0":"t1","1":"t2"},"c":{"0":[],"1":[{"i":"t2","r":1}]},"x":2}]}},{"e":{"1":4},"t":{"2":"t4","3":"t5"},"c":{"2":[{"i":"t4","r":2,"e":{"0":1}}],"3":[]}},{"t":{"3":"t6"},"c":{"3":[]}},{"t":{"3":"t8"},"c":{"3":[{"i":"t8","r":1,"t":{"1":"t9","2":"t10"},"c":{"1":[{"i":"t10","r":1}],"2":[]}},{"i":"t8","r":1,"t":{"1":"t9","2":"t10"},"c":{"1":[{"i":"t9","r":2,"e":{"0":1}}],"2":[]}}]}},{"c":{"0":[]}},{"t":{"0":"t3","6":"t7"},"c":{"0":[{"i":"t3","r":1}],"6":[{"i":"t7","r":1}]},"n":{"3":"2f2"},"d":[5]},{"c":{"6":[{"i":"c1870341192","r":1}]}}]}</script></body></html>